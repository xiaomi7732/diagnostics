(window["webpackJsonpdotnet-trace-ui"]=window["webpackJsonpdotnet-trace-ui"]||[]).push([[0],{166:function(e,t,n){e.exports=n(358)},171:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){"use strict";n.r(t);var a,r,s=n(1),c=n.n(s),o=n(53),i=n.n(o),u=(n(171),n(2)),l=n.n(u),p=n(7),d=n(10),m=n(11),f=n(13),h=n(12),v=n(14),y=(n(173),n(174),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleRefresh=function(){var e=Object(p.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),n.props.refreshProcessAsync();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=0;if(void 0===this.props.processArray||0===this.props.processArray.length)e=c.a.createElement("div",null,"There is no .NET Core processes.");else{n=this.props.processArray.length;var a="button"+(this.props.isDumping?" disabled":"");e=this.props.processArray.map(function(e,n){return c.a.createElement("div",{className:"process-line",key:n},c.a.createElement("span",{className:"process-id"},e.id)," ",c.a.createElement("span",{className:"process-name"},e.name)," ",c.a.createElement("span",{className:"process-path"},e.mainModule),c.a.createElement("input",{className:"button",type:"button",value:"\u25b6 Start Profiling",onClick:function(){t.props.startProfilingAsync(e.id)}}),c.a.createElement("input",{className:"button",type:"button",value:"\u25b6 Start Monitoring",onClick:function(){t.props.startMonitoringAsync(e.id)}}),c.a.createElement("input",{className:a,type:"button",value:"\ud83d\udcf8 Mini Dump",disabled:t.props.isDumping,onClick:Object(p.a)(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.props.takeDumpAsync(e.id,!0);case 2:case"end":return n.stop()}},n)}))}),c.a.createElement("input",{className:a,type:"button",value:"\ud83d\udcf8 Heap Dump",disabled:t.props.isDumping,onClick:Object(p.a)(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.props.takeDumpAsync(e.id,!1);case 2:case"end":return n.stop()}},n)}))}))})}return c.a.createElement("div",{className:"processes"},c.a.createElement("div",{className:"header"},c.a.createElement("h2",null,"Remote Process (",n,")"),c.a.createElement("input",{className:"button header-button refresh-button",type:"button",onClick:this.handleRefresh,value:"\ud83d\uddd8"})),this.props.isDumping?c.a.createElement("div",null,"Dump in progress . . ."):null,e)}}]),t}(s.Component)),b=(n(175),function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.traceSessions||0===this.props.traceSessions.length?e=c.a.createElement("div",null,"There's no trace sessions."):(n=this.props.traceSessions.length,e=c.a.createElement("div",{className:"session-container"},this.props.traceSessions.map(function(e,n){return c.a.createElement("div",{className:"session-line",key:n},c.a.createElement("div",{className:"process-id-part"},c.a.createElement("span",{className:"bold-text"},"ProcessId:\xa0"),c.a.createElement("span",null,e.processId)),c.a.createElement("div",{className:"session-id-part"},c.a.createElement("span",{className:"bold-text"},"SessionId:\xa0"),c.a.createElement("span",null,e.sessionId)),0===e.type&&c.a.createElement("input",{className:"button",type:"button",value:"\u25a0 Stop Profiling",onClick:function(){t.props.stopProfilingAsync(e.processId,e.sessionId)}}),1===e.type&&c.a.createElement("input",{className:"button",type:"button",value:"\u25a0 Stop Monitoring",onClick:function(){t.props.stopMonitoringAsync(e.processId,e.sessionId)}}),1===e.type&&c.a.createElement("input",{className:"button",type:"button",value:"\ud83d\udde0 Visualize",onClick:function(){t.props.setAsSelected(e)}}))}))),c.a.createElement("div",{className:"trace-session"},c.a.createElement("div",{className:"header"},c.a.createElement("h2",null,"Remote Trace Sessions (",n,")"),c.a.createElement("input",{className:"button header-button",type:"button",defaultValue:"\ud83d\uddd8",onClick:this.props.loadTraceSessionsAsync})),e)}}]),t}(s.PureComponent)),k=n(131),A=n.n(k),g=(n(176),function(e){function t(){return Object(d.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.fileArray||0===this.props.fileArray.length?e=c.a.createElement("div",null,"There's no trace file."):(n=this.props.fileArray.length,e=c.a.createElement("div",null,this.props.fileArray.sort(function(e,t){return e.fileName>t.fileName?-1:1}).map(function(e,n){var a=e.fileName.toLowerCase().endsWith(".nettrace")?"nettrace":"speedscope",r=A.a(e.sizeInBytes,{round:0});return c.a.createElement("div",{key:n,className:"trace-file-line"},c.a.createElement("div",{className:"trace-file"},c.a.createElement("a",{href:"".concat(t.props.baseUrl,"/TraceFiles/").concat(e.fileName)},e.fileName)),c.a.createElement("div",{className:"trace-file-size"},r),"nettrace"===a&&c.a.createElement("input",{className:"button",type:"button",value:"Get speedscope file",onClick:function(){return t.props.convertToSpeedscopeAsync(e.fileName)}}))}))),c.a.createElement("div",{className:"trace-repo"},c.a.createElement("div",{className:"header"},c.a.createElement("h2",null,"Remote Trace Files (",n,")"),c.a.createElement("input",{className:"button header-button",type:"button",value:"\ud83d\uddd8",onClick:Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.loadTraceFilesAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))})),c.a.createElement("div",{className:"speed-scope-tips"},"To open trace in ",c.a.createElement("a",{href:"https://speedscope.app",target:"_blank",rel:"noopener noreferrer"},"speedscope"),", download the ",c.a.createElement("span",null,"speedscope.json")," files to your local box and upload it to ",c.a.createElement("a",{href:"https://speedscope.app",target:"_blank",rel:"noopener noreferrer"},"speedscope.app"),"."),e)}}]),t}(s.PureComponent)),E=(n(177),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).handleConnectAsync=function(){var e=Object(p.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({errorMessage:"",isConnecting:!0}),e.next=3,n.props.connectToBackendAsync(t);case 3:e.sent||n.setState({errorMessage:"Failed to connecting to backend: ".concat(t,"."),isConnecting:!1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleAddBackend=function(e){e.preventDefault();var t=e.target.newBackend.value;t&&(n.props.addBackend(t),n.setState({newUrl:""}))},n.handleNewUrlChanged=function(e){n.setState({newUrl:e.target.value})},n.state={errorMessage:void 0,isConnecting:!1,newUrl:""},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this;return e=void 0===this.props.backendUrlArray||0===this.props.backendUrlArray.length?c.a.createElement("div",null,"Please add backend."):this.props.backendUrlArray.map(function(e,n){return c.a.createElement("div",{className:"backend-item-container",key:n},c.a.createElement("span",{className:"backend-url",onClick:Object(p.a)(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.handleConnectAsync(e);case 2:case"end":return n.stop()}},n)}))},e),c.a.createElement("input",{className:"button",type:"button",value:"Connect",onClick:Object(p.a)(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.handleConnectAsync(e);case 2:case"end":return n.stop()}},n)}))}),c.a.createElement("input",{className:"button",type:"button",value:"Remove",onClick:Object(p.a)(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.props.removeBackend(e);case 1:case"end":return n.stop()}},n)}))}))}),c.a.createElement("div",{className:"connect-backend"},c.a.createElement("h2",null,"Pick a backend"),e,!!this.state.isConnecting&&c.a.createElement("div",null,"Connecting . . ."),!!this.state.errorMessage&&c.a.createElement("div",null,this.state.errorMessage),c.a.createElement("h2",null,"Adding new Backend"),c.a.createElement("div",{className:"new-endpoint-container"},c.a.createElement("form",{onSubmit:this.handleAddBackend},c.a.createElement("label",{htmlFor:"newBackend"},"Type in a new endpoint:"),c.a.createElement("input",{className:"text-input",id:"newBackend",type:"textbox",placeholder:"http://localhost:9400",value:this.state.newUrl,onChange:this.handleNewUrlChanged}),c.a.createElement("div",null,c.a.createElement("span",{className:"tips"},"Tips: Press enter to add the endpoint.")))))}}]),t}(s.Component)),w=function(){return c.a.createElement("div",{className:"app-header"},c.a.createElement("h1",null,".NET Core Profiling Console"))},S=function(e){return c.a.createElement("div",{className:"connection-status"},c.a.createElement("h2",null,"Connection"),c.a.createElement("span",null,"\ud83d\udda7 You are connecting to: ",e.baseUrl),c.a.createElement("input",{className:"button",type:"button",onClick:e.disconnectBackend,value:"Disconnect"}))},x=(n(178),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).getValidProfile=function(){if(void 0!==n.props.profileArray)return n.props.profileArray.filter(function(e){return"none"!==e.name})},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=0,a=this.getValidProfile();return void 0!==a?(n=a.length,e=c.a.createElement("div",{className:"ProfileListContainer"},c.a.createElement("select",{value:this.props.selectedProfile,onChange:function(e){var n=e.target;n&&n.value&&t.props.onSelected(n.value)}},a.sort(function(e,t){return e>t?1:-1}).map(function(e){return c.a.createElement("option",{key:e.name,value:e.name},e.name,": ",e.description)})))):e="No tracing profile exist.",c.a.createElement("div",{className:"profile-picker"},c.a.createElement("div",{className:"header"},c.a.createElement("h2",null,"Tracing Profiles (",n,")"),c.a.createElement("input",{className:"button header-button refresh-button",type:"button",onClick:this.props.onRefresh,value:"\ud83d\uddd8"})),e)}}]),t}(s.PureComponent)),C=n(28);n(356);!function(e){e[e["CPU Usage"]=0]="CPU Usage",e[e["Number of Active Timers"]=1]="Number of Active Timers",e[e["Exception Count"]=2]="Exception Count",e[e["ThreadPool Thread Count"]=3]="ThreadPool Thread Count",e[e["ThreadPool Queue Length"]=4]="ThreadPool Queue Length",e[e["ThreadPool Completed Work Item Count"]=5]="ThreadPool Completed Work Item Count",e[e["Working Set"]=6]="Working Set",e[e["Allocation Rate"]=7]="Allocation Rate",e[e["Number of Assemblies Loaded"]=8]="Number of Assemblies Loaded",e[e["GC Heap Size"]=9]="GC Heap Size",e[e["% Time in GC since last GC"]=10]="% Time in GC since last GC",e[e["Gen 0 Size"]=11]="Gen 0 Size",e[e["Gen 0 GC Count"]=12]="Gen 0 GC Count",e[e["Gen 1 Size"]=13]="Gen 1 Size",e[e["Gen 1 GC Count"]=14]="Gen 1 GC Count",e[e["LOH Size"]=15]="LOH Size",e[e["Gen 2 Size"]=16]="Gen 2 Size",e[e["Gen 2 GC Count"]=17]="Gen 2 GC Count",e[e["Current Requests"]=18]="Current Requests",e[e["Failed Requests"]=19]="Failed Requests",e[e["Total Requests"]=20]="Total Requests",e[e["Request Rate"]=21]="Request Rate",e[e["Monitor Lock Contention Count"]=22]="Monitor Lock Contention Count"}(a||(a={})),function(e){e[e["#005697"]=0]="#005697",e[e["#456990"]=1]="#456990",e[e["#3F5E5A"]=2]="#3F5E5A",e[e["#C52184"]=3]="#C52184",e[e["#5FAD41"]=4]="#5FAD41",e[e["#54F2F2"]=5]="#54F2F2"}(r||(r={}));var N=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).loadDataAsync=Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",setInterval(Object(p.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.getReportAsync();case 2:t=e.sent,n.setState({report:t});case 4:case"end":return e.stop()}},e)})),500));case 1:case"end":return e.stop()}},e)})),n.updateWindowDimensions=function(){n.setState({width:window.innerWidth})},n.metricsNameComparer=function(e,t){return n.getScore(e,1e6)-n.getScore(t,1e6)},n.getScore=function(e,t){var n=t;if(null===e||void 0===e)return t;for(var r in a)if(e.startsWith(r)){n=+a[r];break}return n===t&&console.warn(e+" is an unknown metrics."),n},n.state={report:void 0,width:0,interval:null},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDataAsync();case 2:t=e.sent,this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.setState({interval:t});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions),null!==this.state.interval&&clearInterval(this.state.interval)}},{key:"render",value:function(){var e,t=this.state,n=t.report,a=t.width;if(void 0===n)e=c.a.createElement("div",{className:"data-loading-message"},"Visualization data not available.");else{var s=a<600?a-24:a/3-8;s<300&&(s=300);var o=2*s/4;o<200&&(o=200),e=c.a.createElement(c.a.Fragment,null,Object.keys(n).sort(this.metricsNameComparer).map(function(e,t){var a=n[e].map(function(t,n){return{key:e,value:t,x:n}}),i=r[t%(Object.keys(r).length/2)];return c.a.createElement("div",{key:t,style:{display:"flex",flexFlow:"column"}},c.a.createElement("h4",{className:"chart-title"},e),c.a.createElement(C.b,{width:s,height:o,data:a,margin:{top:5,right:20,left:10,bottom:5}},c.a.createElement("defs",null,c.a.createElement("linearGradient",{id:i,x1:"0",y1:"0",x2:"0",y2:"1"},c.a.createElement("stop",{offset:"5%",stopColor:i,stopOpacity:.6}),c.a.createElement("stop",{offset:"95%",stopColor:i,stopOpacity:.2}))),c.a.createElement(C.e,{stroke:"white",dataKey:"x",type:"number"}),c.a.createElement(C.f,{stroke:"white",type:"number"}),c.a.createElement(C.c,{strokeDasharray:"5 2",vertical:!1,strokeWidth:"1",stroke:"#888888"}),c.a.createElement(C.d,{wrapperStyle:{color:"blue",backgroundColor:"red"},isAnimationActive:!1}),c.a.createElement(C.a,{type:"monotone",dataKey:"value",strokeWidth:2,stroke:i,fillOpacity:1,fill:"url(#"+i+")",isAnimationActive:!1})))}))}return c.a.createElement("div",{className:"monitor-viz"},e)}}]),t}(c.a.Component),O=(n(357),function(e){var t=e.processId,n=e.sessionId,a=e.getReportAsync,r=e.exitMonitor,c=e.takeDumpAsync,o=e.isDumping,i=e.traceSessionArray,u=e.startProfilingAsync,d=e.stopProfilingAsync,m="button"+(o?" disabled":""),f=void 0===i?void 0:i.find(function(e){return e.processId===t&&e.processId!==n&&0===e.type});return s.createElement("div",{className:"monitor-page"},s.createElement("div",{className:"header"},s.createElement("h2",null,"Monitoring"),s.createElement("h3",null,"Session: ",n," Process: ",t),s.createElement("input",{type:"button",value:"Heap Dump",className:m,onClick:Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),disabled:o}),s.createElement("input",{type:"button",value:"Mini Dump",className:m,onClick:Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),disabled:o}),!!f&&s.createElement("input",{type:"button",value:"Stop Profiling",className:m,onClick:Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===f){e.next=3;break}return e.next=3,d(f.processId,f.sessionId);case 3:case"end":return e.stop()}},e)}))}),!f&&s.createElement("input",{type:"button",value:"Start Profiling",className:m,onClick:Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:case"end":return e.stop()}},e)}))}),s.createElement("input",{type:"button",value:"Back",className:"button",onClick:r})),s.createElement("div",{className:"viz"},s.createElement(N,{getReportAsync:a})))});O.defaultProps={processId:0,sessionId:0};var j=O,P=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this,e))).BackendListKey="backendList",n.initializeAsync=Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.loadProcessesAsync(),n.loadTraceSessionsAsync(),n.loadTraceFilesAsync(),n.LoadProfilesAsync()]);case 2:n.selectProfile("runtime-basic"),n.setState({isReady:!0});case 4:case"end":return e.stop()}},e)})),n.loadProcessesAsync=Object(p.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getProcessesAsync();case 3:t=e.sent,n.setState({processArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({processArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getProcessesAsync=Object(p.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/processes"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.startProfilingAsync=function(){var e=Object(p.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,profile:n.state.selectedProfile})});case 2:if(a=e.sent,!(r=!!a&&a.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.stopProfilingAsync=function(){var e=Object(p.a)(l.a.mark(function e(t,a){var r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces/").concat(t,"?sessionId=").concat(a),{method:"DELETE"});case 2:if(r=e.sent,!(s=!!r&&r.ok)){e.next=7;break}return e.next=7,Promise.all([n.loadTraceSessionsAsync(),n.loadTraceFilesAsync()]);case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.startMonitoringAsync=function(){var e=Object(p.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/monitors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t})});case 2:if(a=e.sent,!(r=!!a&&a.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.stopMonitoringAsync=function(){var e=Object(p.a)(l.a.mark(function e(t,a){var r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/monitors"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,id:a})});case 2:if(r=e.sent,!(s=!!r&&r.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.loadTraceSessionsAsync=Object(p.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceSessionsAsync();case 3:t=e.sent,n.setState({traceSessionArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceSessionArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceSessionsAsync=Object(p.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/sessions"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.setSelectedSession=function(e){var t={selectedSession:e};void 0===e?t.isShowMonitor=!1:n.state.isShowMonitor||(t.isShowMonitor=!0),n.setState(t)},n.getReportAsync=Object(p.a)(l.a.mark(function e(){var t,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=n.state.selectedSession)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,fetch("".concat(n.state.baseUrl,"/Monitors/").concat(t.processId,"/").concat(t.sessionId));case 5:if(!(a=e.sent)||!a.ok){e.next=13;break}return e.next=9,a.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}},e)})),n.setShowMonitoring=function(e){n.setState({isShowMonitor:e})},n.loadTraceFilesAsync=Object(p.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceFilesAsync();case 3:t=e.sent,n.setState({traceFileArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceFileArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceFilesAsync=Object(p.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traceFiles"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.convertToSpeedscopeAsync=function(){var e=Object(p.a)(l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traceFiles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:t})});case 2:if(!(a=e.sent)||!a.ok){e.next=9;break}return e.next=6,n.loadTraceFilesAsync();case 6:return e.abrupt("return",!0);case 9:return e.next=11,a.json();case 11:r=e.sent,alert(" Details: "+r.error);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.addBackend=function(e){e=e.toLowerCase();var t=n.getList();t.includes(e)||t.push(e),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.removeBackend=function(e){e=e.toLowerCase();var t=n.getList();t=t.filter(function(t){return t!==e}),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.disconnectBackend=function(){n.setState({baseUrl:"",isReady:!1,isBackendReady:!1})},n.connectToBackendAsync=function(){var e=Object(p.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=t.trim()).startsWith("http")||t.startsWith("https")){e.next=4;break}return e.abrupt("return",!1);case 4:return t.endsWith("/")&&(t=t.substring(0,t.length-1)),e.next=7,fetch(t+"/processes");case 7:if(!(a=e.sent)||!a.ok){e.next=13;break}return n.setState({isBackendReady:!0,baseUrl:t}),e.next=12,n.initializeAsync();case 12:return e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),n.LoadProfilesAsync=Object(p.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getProfilesAsync();case 2:(t=e.sent).length>0?n.setState({profileArray:t}):n.setState({profileArray:void 0});case 4:case"end":return e.stop()}},e)})),n.getProfilesAsync=Object(p.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/profiles"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.selectProfile=function(e){n.setState({selectedProfile:e})},n.takeDumpAsync=function(){var e=Object(p.a)(l.a.mark(function e(t,a){var r,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isDumping:!0}),0,1,r=a?1:0,e.next=6,fetch("".concat(n.state.baseUrl,"/dumps"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,dumpType:r})});case 6:if(!(s=e.sent)||!s.ok){e.next=15;break}return e.next=10,n.loadTraceFilesAsync();case 10:return alert("Dump crated for process "+t),n.setState({isDumping:!1}),e.abrupt("return",!0);case 15:alert("Failed to create the dump for this process: "+t),n.setState({isDumping:!1});case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.state={processArray:void 0,traceSessionArray:void 0,traceFileArray:void 0,isReady:!1,isBackendReady:!1,backendUrlArray:n.getList(),baseUrl:"",profileArray:void 0,selectedProfile:void 0,isDumping:!1,selectedSession:void 0,isShowMonitor:!1},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this;if(this.state.isBackendReady){var n=this.state,a=n.isShowMonitor,r=n.selectedSession;e=this.state.isReady?c.a.createElement(c.a.Fragment,null,a&&void 0!==r&&c.a.createElement(j,{traceSessionArray:this.state.traceSessionArray,isDumping:this.state.isDumping,processId:r.processId,sessionId:r.sessionId,getReportAsync:this.getReportAsync,exitMonitor:function(){t.setShowMonitoring(!1)},takeDumpAsync:this.takeDumpAsync.bind(this),startProfilingAsync:this.startProfilingAsync,stopProfilingAsync:this.stopProfilingAsync}),(!a||void 0===r)&&c.a.createElement("div",{className:"section"},c.a.createElement(S,{baseUrl:this.state.baseUrl,disconnectBackend:this.disconnectBackend}),c.a.createElement(x,{profileArray:this.state.profileArray,onSelected:this.selectProfile,selectedProfile:this.state.selectedProfile,onRefresh:this.LoadProfilesAsync}),c.a.createElement(y,{refreshProcessAsync:this.loadProcessesAsync,startProfilingAsync:this.startProfilingAsync,startMonitoringAsync:this.startMonitoringAsync,takeDumpAsync:this.takeDumpAsync,processArray:this.state.processArray,isDumping:this.state.isDumping}),c.a.createElement(b,{traceSessions:this.state.traceSessionArray,stopProfilingAsync:this.stopProfilingAsync,stopMonitoringAsync:this.stopMonitoringAsync,loadTraceSessionsAsync:this.loadTraceSessionsAsync,setAsSelected:this.setSelectedSession}),c.a.createElement(g,{baseUrl:this.state.baseUrl,loadTraceFilesAsync:this.loadTraceFilesAsync,convertToSpeedscopeAsync:this.convertToSpeedscopeAsync,fileArray:this.state.traceFileArray}))):null}else e=c.a.createElement(E,{backendUrlArray:this.state.backendUrlArray,addBackend:this.addBackend,removeBackend:this.removeBackend,connectToBackendAsync:this.connectToBackendAsync});return c.a.createElement("div",{className:"dark-theme"},c.a.createElement(w,null),c.a.createElement("div",{className:"app-container"},e))}},{key:"getList",value:function(){var e=localStorage.getItem(this.BackendListKey);return null===e||""===e||"[]"===e?["http://localhost:9400"]:JSON.parse(e)}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[166,1,2]]]);
//# sourceMappingURL=main.41bcf1c7.chunk.js.map