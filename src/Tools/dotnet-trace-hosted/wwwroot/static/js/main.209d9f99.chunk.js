(window["webpackJsonpdotnet-trace-ui"]=window["webpackJsonpdotnet-trace-ui"]||[]).push([[0],{185:function(e,t,n){e.exports=n(381)},190:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},375:function(e,t,n){},376:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){"use strict";n.r(t);var a,r,s=n(1),o=n.n(s),c=n(45),i=n.n(c),l=(n(190),n(3)),u=n.n(l),p=n(8),d=n(13),f=n(14),m=n(16),h=n(15),v=n(17),b=(n(192),n(193),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleRefresh=function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),n.props.refreshProcessAsync();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this,n=0;if(void 0===this.props.processArray||0===this.props.processArray.length)e=o.a.createElement("div",null,"There is no .NET Core processes.");else{n=this.props.processArray.length;var a="button"+(this.props.isDumping?" disabled":"");e=this.props.processArray.map(function(e,n){return o.a.createElement("div",{className:"process-line",key:n},o.a.createElement("span",{className:"process-id"},e.id)," ",o.a.createElement("span",{className:"process-name"},e.name)," ",o.a.createElement("span",{className:"process-path"},e.mainModule),o.a.createElement("input",{className:"button",type:"button",value:"\u25b6 Start Profiling",onClick:function(){t.props.startProfilingAsync(e.id)}}),o.a.createElement("input",{className:"button",type:"button",value:"\u25b6 Start Monitoring",onClick:function(){t.props.startMonitoringAsync(e.id)}}),o.a.createElement("input",{className:a,type:"button",value:"\ud83d\udcf8 Mini Dump",disabled:t.props.isDumping,onClick:Object(p.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.props.takeDumpAsync(e.id,!0);case 2:case"end":return n.stop()}},n)}))}),o.a.createElement("input",{className:a,type:"button",value:"\ud83d\udcf8 Heap Dump",disabled:t.props.isDumping,onClick:Object(p.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.props.takeDumpAsync(e.id,!1);case 2:case"end":return n.stop()}},n)}))}))})}return o.a.createElement("div",{className:"processes"},o.a.createElement("div",{className:"header"},o.a.createElement("h2",null,"Remote Process (",n,")"),o.a.createElement("input",{className:"button header-button refresh-button",type:"button",onClick:this.handleRefresh,value:"\ud83d\uddd8"})),this.props.isDumping?o.a.createElement("div",null,"Dump in progress . . ."):null,e)}}]),t}(s.Component)),y=(n(194),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.traceSessions||0===this.props.traceSessions.length?e=o.a.createElement("div",null,"There's no trace sessions."):(n=this.props.traceSessions.length,e=o.a.createElement("div",{className:"session-container"},this.props.traceSessions.map(function(e,n){return o.a.createElement("div",{className:"session-line",key:n},o.a.createElement("div",{className:"process-id-part"},o.a.createElement("span",{className:"bold-text"},"ProcessId:\xa0"),o.a.createElement("span",null,e.processId)),o.a.createElement("div",{className:"session-id-part"},o.a.createElement("span",{className:"bold-text"},"SessionId:\xa0"),o.a.createElement("span",null,e.sessionId)),0===e.type&&o.a.createElement("input",{className:"button",type:"button",value:"\u25a0 Stop Profiling",onClick:function(){t.props.stopProfilingAsync(e.processId,e.sessionId)}}),1===e.type&&o.a.createElement("input",{className:"button",type:"button",value:"\u25a0 Stop Monitoring",onClick:function(){t.props.stopMonitoringAsync(e.processId,e.sessionId)}}),1===e.type&&o.a.createElement("input",{className:"button",type:"button",value:"\ud83d\udde0 Visualize",onClick:function(){t.props.setAsSelected(e)}}))}))),o.a.createElement("div",{className:"trace-session"},o.a.createElement("div",{className:"header"},o.a.createElement("h2",null,"Remote Trace Sessions (",n,")"),o.a.createElement("input",{className:"button header-button",type:"button",defaultValue:"\ud83d\uddd8",onClick:this.props.loadTraceSessionsAsync})),e)}}]),t}(s.PureComponent)),k=n(145),E=n.n(k),g=(n(195),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.fileArray||0===this.props.fileArray.length?e=o.a.createElement("div",null,"There's no trace file."):(n=this.props.fileArray.length,e=o.a.createElement("div",null,this.props.fileArray.sort(function(e,t){return e.fileName>t.fileName?-1:1}).map(function(e,n){var a=e.fileName.toLowerCase().endsWith(".nettrace")?"nettrace":"speedscope",r=E.a(e.sizeInBytes,{round:0});return o.a.createElement("div",{key:n,className:"trace-file-line"},o.a.createElement("div",{className:"trace-file"},o.a.createElement("a",{href:"".concat(t.props.baseUrl,"/TraceFiles/").concat(e.fileName)},e.fileName)),o.a.createElement("div",{className:"trace-file-size"},r),"nettrace"===a&&o.a.createElement("input",{className:"button",type:"button",value:"Get speedscope file",onClick:function(){return t.props.convertToSpeedscopeAsync(e.fileName)}}))}))),o.a.createElement("div",{className:"trace-repo"},o.a.createElement("div",{className:"header"},o.a.createElement("h2",null,"Remote Trace Files (",n,")"),o.a.createElement("input",{className:"button header-button",type:"button",value:"\ud83d\uddd8",onClick:Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.loadTraceFilesAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))})),o.a.createElement("div",{className:"speed-scope-tips"},"To open trace in ",o.a.createElement("a",{href:"https://speedscope.app",target:"_blank",rel:"noopener noreferrer"},"speedscope"),", download the ",o.a.createElement("span",null,"speedscope.json")," files to your local box and upload it to ",o.a.createElement("a",{href:"https://speedscope.app",target:"_blank",rel:"noopener noreferrer"},"speedscope.app"),"."),e)}}]),t}(s.PureComponent)),w=(n(196),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleConnectAsync=function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({errorMessage:"",isConnecting:!0}),e.next=3,n.props.connectToBackendAsync(t);case 3:e.sent||n.setState({errorMessage:"Failed to connecting to backend: ".concat(t,"."),isConnecting:!1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleAddBackend=function(e){e.preventDefault();var t=e.target.newBackend.value;t&&(n.props.addBackend(t),n.setState({newUrl:""}))},n.handleNewUrlChanged=function(e){n.setState({newUrl:e.target.value})},n.state={errorMessage:void 0,isConnecting:!1,newUrl:""},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this;return e=void 0===this.props.backendUrlArray||0===this.props.backendUrlArray.length?o.a.createElement("div",null,"Please add backend."):this.props.backendUrlArray.map(function(e,n){return o.a.createElement("div",{className:"backend-item-container",key:n},o.a.createElement("span",{className:"backend-url",onClick:Object(p.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.handleConnectAsync(e);case 2:case"end":return n.stop()}},n)}))},e),o.a.createElement("input",{className:"button",type:"button",value:"Connect",onClick:Object(p.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.handleConnectAsync(e);case 2:case"end":return n.stop()}},n)}))}),o.a.createElement("input",{className:"button",type:"button",value:"Remove",onClick:Object(p.a)(u.a.mark(function n(){return u.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.props.removeBackend(e);case 1:case"end":return n.stop()}},n)}))}))}),o.a.createElement("div",{className:"connect-backend"},o.a.createElement("h2",null,"Pick a backend"),e,!!this.state.isConnecting&&o.a.createElement("div",null,"Connecting . . ."),!!this.state.errorMessage&&o.a.createElement("div",null,this.state.errorMessage),o.a.createElement("h2",null,"Adding new Backend"),o.a.createElement("div",{className:"new-endpoint-container"},o.a.createElement("form",{onSubmit:this.handleAddBackend},o.a.createElement("label",{htmlFor:"newBackend"},"Type in a new endpoint:"),o.a.createElement("input",{className:"text-input",id:"newBackend",type:"textbox",placeholder:"http://localhost:9400",value:this.state.newUrl,onChange:this.handleNewUrlChanged}),o.a.createElement("div",null,o.a.createElement("span",{className:"tips"},"Tips: Press enter to add the endpoint.")))))}}]),t}(s.Component)),A=function(){return o.a.createElement("div",{className:"app-header"},o.a.createElement("h1",null,".NET Core Profiling Console"))},P=function(e){return o.a.createElement("div",{className:"connection-status"},o.a.createElement("h2",null,"Connection"),o.a.createElement("span",null,"\ud83d\udda7 You are connecting to: ",e.baseUrl),o.a.createElement("input",{className:"button",type:"button",onClick:e.disconnectBackend,value:"Disconnect"}))},S=(n(197),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).getValidProfile=function(){if(void 0!==n.props.profileArray)return n.props.profileArray.filter(function(e){return"none"!==e.name})},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this,n=0,a=this.getValidProfile();return void 0!==a?(n=a.length,e=o.a.createElement("div",{className:"ProfileListContainer"},o.a.createElement("select",{value:this.props.selectedProfile,onChange:function(e){var n=e.target;n&&n.value&&t.props.onSelected(n.value)}},a.sort(function(e,t){return e>t?1:-1}).map(function(e){return o.a.createElement("option",{key:e.name,value:e.name},e.name,": ",e.description)})),o.a.createElement("input",{type:"button",className:"button",value:"Manage ...",onClick:this.props.manageProfile}))):e="No tracing profile exist.",o.a.createElement("div",{className:"profile-picker"},o.a.createElement("div",{className:"header"},o.a.createElement("h2",null,"Tracing Profiles (",n,")"),o.a.createElement("input",{className:"button header-button refresh-button",type:"button",onClick:this.props.onRefresh,value:"\ud83d\uddd8"})),e)}}]),t}(s.PureComponent)),N=n(38);n(375);!function(e){e[e["CPU Usage"]=0]="CPU Usage",e[e["Number of Active Timers"]=1]="Number of Active Timers",e[e["Exception Count"]=2]="Exception Count",e[e["ThreadPool Thread Count"]=3]="ThreadPool Thread Count",e[e["ThreadPool Queue Length"]=4]="ThreadPool Queue Length",e[e["ThreadPool Completed Work Item Count"]=5]="ThreadPool Completed Work Item Count",e[e["Working Set"]=6]="Working Set",e[e["Allocation Rate"]=7]="Allocation Rate",e[e["Number of Assemblies Loaded"]=8]="Number of Assemblies Loaded",e[e["GC Heap Size"]=9]="GC Heap Size",e[e["% Time in GC since last GC"]=10]="% Time in GC since last GC",e[e["Gen 0 Size"]=11]="Gen 0 Size",e[e["Gen 0 GC Count"]=12]="Gen 0 GC Count",e[e["Gen 1 Size"]=13]="Gen 1 Size",e[e["Gen 1 GC Count"]=14]="Gen 1 GC Count",e[e["LOH Size"]=15]="LOH Size",e[e["Gen 2 Size"]=16]="Gen 2 Size",e[e["Gen 2 GC Count"]=17]="Gen 2 GC Count",e[e["Current Requests"]=18]="Current Requests",e[e["Failed Requests"]=19]="Failed Requests",e[e["Total Requests"]=20]="Total Requests",e[e["Request Rate"]=21]="Request Rate",e[e["Monitor Lock Contention Count"]=22]="Monitor Lock Contention Count"}(a||(a={})),function(e){e[e["#005697"]=0]="#005697",e[e["#456990"]=1]="#456990",e[e["#3F5E5A"]=2]="#3F5E5A",e[e["#C52184"]=3]="#C52184",e[e["#5FAD41"]=4]="#5FAD41",e[e["#54F2F2"]=5]="#54F2F2"}(r||(r={}));var x=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).updateWindowDimensions=function(){n.setState({width:window.innerWidth})},n.metricsNameComparer=function(e,t){return n.getScore(e,1e6)-n.getScore(t,1e6)},n.getScore=function(e,t){var n=t;if(null===e||void 0===e)return t;for(var r in a)if(e.startsWith(r)){n=+a[r];break}return n===t&&console.warn(e+" is an unknown metrics."),n},n.state={width:0},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"render",value:function(){var e,t=this.state.width,n=this.props.report;if(void 0===n||0===n.size)e=o.a.createElement("div",{className:"data-loading-message"},"Visualization data not available.");else{var a=t<600?t-24:t/3-8;a<300&&(a=300);var s=2*a/4;s<200&&(s=200),e=o.a.createElement(o.a.Fragment,null,Array.from(n.keys()).sort(this.metricsNameComparer).map(function(e,t){var c=n.get(e);if(void 0!==c){var i=c.map(function(t,n){return{key:e,value:t,x:n}}),l=r[t%(Object.keys(r).length/2)];return o.a.createElement("div",{key:t,style:{display:"flex",flexFlow:"column"}},o.a.createElement("h4",{className:"chart-title"},e),o.a.createElement(N.b,{width:a,height:s,data:i,margin:{top:5,right:20,left:10,bottom:5}},o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:l,x1:"0",y1:"0",x2:"0",y2:"1"},o.a.createElement("stop",{offset:"5%",stopColor:l,stopOpacity:.6}),o.a.createElement("stop",{offset:"95%",stopColor:l,stopOpacity:.2}))),o.a.createElement(N.e,{stroke:"white",dataKey:"x",type:"number"}),o.a.createElement(N.f,{stroke:"white",type:"number"}),o.a.createElement(N.c,{strokeDasharray:"5 2",vertical:!1,strokeWidth:"1",stroke:"#888888"}),o.a.createElement(N.d,{wrapperStyle:{color:"blue",backgroundColor:"red"},isAnimationActive:!1}),o.a.createElement(N.a,{type:"monotone",dataKey:"value",strokeWidth:2,stroke:l,fillOpacity:1,fill:"url(#"+l+")",isAnimationActive:!1})))}return null}))}return o.a.createElement("div",{className:"monitor-viz"},e)}}]),t}(o.a.Component),C=(n(376),n(157)),O=function(e){function t(e){var n;Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).onUpdate=function(e,t,a,r){if(e===n.props.processId&&t===n.props.sessionId){var s=n.reportCache;if(s.has(a)){var o=s.get(a);if(null!=o){for(;o.length>=60;)o.pop();o.push(r),s.set(a,o)}}else s.set(a,[r]);if(n.reportCache=s,void 0===n.lastUpdate)n.lastUpdate=new Date,n.setState({report:s});else{var c=new Date;c.getTime()-n.lastUpdate.getTime()>=500&&(n.lastUpdate=c,console.debug("Report:"),s.forEach(function(e,t){console.debug("".concat(t,":").concat(e.length))}),n.setState({report:s}))}}},n.reportCache=new Map,n.lastUpdate=void 0;var a=(new C.a).withUrl("".concat(n.props.selectedEndpoint,"/counterHub")).build();return a.on("updateCounterAsync",n.onUpdate),a.start().catch(function(e){alert(e),a=null}),n.state={report:new Map,counterHub:a},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentWillUnmount",value:function(){null!==this.state.counterHub&&this.state.counterHub.stop()}},{key:"render",value:function(){var e=this.props,t=e.processId,n=e.sessionId,a=e.exitMonitor,r=e.takeDumpAsync,o=e.isDumping,c=e.traceSessionArray,i=e.startProfilingAsync,l=e.stopProfilingAsync,d="button"+(o?" disabled":""),f=void 0===c?void 0:c.find(function(e){return e.processId===t&&e.processId!==n&&0===e.type});return s.createElement("div",{className:"monitor-page"},s.createElement("div",{className:"header"},s.createElement("h2",null,"Monitoring"),s.createElement("h3",null,"Session: ",n," Process: ",t),s.createElement("input",{type:"button",value:"Heap Dump",className:d,onClick:Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t,!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),disabled:o}),s.createElement("input",{type:"button",value:"Mini Dump",className:d,onClick:Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t,!0);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),disabled:o}),!!f&&s.createElement("input",{type:"button",value:"Stop Profiling",className:d,onClick:Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===f){e.next=3;break}return e.next=3,l(f.processId,f.sessionId);case 3:case"end":return e.stop()}},e)}))}),!f&&s.createElement("input",{type:"button",value:"Start Profiling",className:d,onClick:Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:case"end":return e.stop()}},e)}))}),s.createElement("input",{type:"button",value:"Back",className:"button",onClick:a})),s.createElement("div",{className:"viz"},s.createElement(x,{report:this.state.report})))}}]),t}(s.Component),j=n(391),T=(n(380),n(66)),D=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e)))._newProfileInputId=Object(T.a)("_newProfileInputId"),n._newProfileDescriptionId=Object(T.a)("_newProfileDescriptionId"),n.handleNewProfileName=function(e){n.setState({newProfileName:e.target.value})},n.handleNewProfileDescription=function(e){n.setState({newProfileDescription:e.target.value})},n.handleNewProfileSubmit=function(){var e=Object(p.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.props.addProfileAsync({name:n.state.newProfileName,description:n.state.newProfileDescription,providers:[]});case 3:null!==e.sent&&(n.setState({isShowNewProfileModel:!1,newProfileDescription:"",newProfileName:""}),n.props.refreshProfile());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.state={isShowNewProfileModel:!1,newProfileName:"",newProfileDescription:""},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.props.profileArray&&this.props.profileArray.length>0&&!this.props.selectedProfile&&this.props.setManageProfile(this.props.profileArray[0])}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.profileArray,r=n.selectedProfile,s=void 0===a?void 0:a.filter(function(e){return"none"!==e.name}),c=null;return void 0!==s?(c=s.sort(function(e,t){return e.name>t.name?1:-1}).map(function(e,n){return o.a.createElement("div",{className:"ProfileNameRadioButton",key:n,title:e.name},o.a.createElement("input",{type:"radio",name:"profileName",value:e.name,checked:!!r&&r.name===e.name,onChange:function(e){if(console.log(e.target.value),e.target&&e.target.value){var n=s.find(function(t){return t.name===e.target.value});t.props.setManageProfile(n)}}}),e.name)}),c=o.a.createElement("div",null,c,o.a.createElement(j.a,{isOpen:this.state.isShowNewProfileModel,isBlocking:!0},o.a.createElement("div",{className:"dialog-container dark-theme"},o.a.createElement("div",{className:"title-container"},"Add a Profile"),o.a.createElement("div",{className:"content-container",role:"presentation"},o.a.createElement("form",{onSubmit:this.handleNewProfileSubmit},o.a.createElement("div",{role:"presentation"},o.a.createElement("label",{htmlFor:this._newProfileInputId},"Profile Name:"),o.a.createElement("input",{id:this._newProfileInputId,type:"input",value:this.state.newProfileName,onChange:this.handleNewProfileName,placeholder:"New profile name."})),o.a.createElement("div",{role:"presentation"},o.a.createElement("label",{htmlFor:this._newProfileDescriptionId},"Description:"),o.a.createElement("input",{id:this._newProfileDescriptionId,type:"input",value:this.state.newProfileDescription,onChange:this.handleNewProfileDescription,placeholder:"Description of the Profile."})),o.a.createElement("div",{className:"button-section"},o.a.createElement("input",{type:"submit",className:"button",value:"Submit"}),o.a.createElement("input",{type:"button",className:"button",value:"Cancel",onClick:function(){t.setState({isShowNewProfileModel:!1,newProfileName:""})}})))))))):c=o.a.createElement("div",null,"No profile."),e=r?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Profile: ",r.name),o.a.createElement("div",null,r.description),o.a.createElement("h3",null,"Providers"),o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"Name"),o.a.createElement("th",null,"Keywords"),o.a.createElement("th",null,"EventLevel"),o.a.createElement("th",null,"Filter"))),o.a.createElement("tbody",null,r.providers.map(function(e,t){return o.a.createElement("tr",{key:t},o.a.createElement("td",null,e.name),o.a.createElement("td",null,"0x",parseInt(e.keywords).toString(16)),o.a.createElement("td",null,e.eventLevel),o.a.createElement("td",null,e.filterData))})))):o.a.createElement("div",null,"Select or create a profile first."),o.a.createElement("div",{className:"ProfileManager"},o.a.createElement("div",{className:"ProfileList"},o.a.createElement("div",{className:"HeaderContainer"},o.a.createElement("h2",null,"Pick a Profile"),"\xa0(",o.a.createElement("div",{className:"AddRemoveButton",onClick:function(){return t.setState({isShowNewProfileModel:!0})}},"+"),"/",o.a.createElement("div",null,"-"),")"),c),o.a.createElement("div",{className:"ProfileDetails"},e))}}]),t}(o.a.Component),M=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).BackendListKey="backendList",n.initializeAsync=Object(p.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.loadProcessesAsync(),n.loadTraceSessionsAsync(),n.loadTraceFilesAsync(),n.loadProfilesAsync()]);case 2:n.selectProfile("runtime-basic"),n.setState({isReady:!0});case 4:case"end":return e.stop()}},e)})),n.loadProcessesAsync=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getProcessesAsync();case 3:t=e.sent,n.setState({processArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({processArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getProcessesAsync=Object(p.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/processes"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.startProfilingAsync=function(){var e=Object(p.a)(u.a.mark(function e(t){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,profile:n.state.selectedProfile})});case 2:if(a=e.sent,!(r=!!a&&a.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.stopProfilingAsync=function(){var e=Object(p.a)(u.a.mark(function e(t,a){var r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces/").concat(t,"?sessionId=").concat(a),{method:"DELETE"});case 2:if(r=e.sent,!(s=!!r&&r.ok)){e.next=7;break}return e.next=7,Promise.all([n.loadTraceSessionsAsync(),n.loadTraceFilesAsync()]);case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.startMonitoringAsync=function(){var e=Object(p.a)(u.a.mark(function e(t){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/monitors"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t})});case 2:if(a=e.sent,!(r=!!a&&a.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.stopMonitoringAsync=function(){var e=Object(p.a)(u.a.mark(function e(t,a){var r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/monitors"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,id:a})});case 2:if(r=e.sent,!(s=!!r&&r.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.loadTraceSessionsAsync=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceSessionsAsync();case 3:t=e.sent,n.setState({traceSessionArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceSessionArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceSessionsAsync=Object(p.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/sessions"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.setSelectedSession=function(e){var t={selectedSession:e};void 0===e?t.isShowMonitor=!1:n.state.isShowMonitor||(t.isShowMonitor=!0),n.setState(t)},n.getReportAsync=Object(p.a)(u.a.mark(function e(){var t,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=n.state.selectedSession)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.next=5,fetch("".concat(n.state.baseUrl,"/Monitors/").concat(t.processId,"/").concat(t.sessionId));case 5:if(!(a=e.sent)||!a.ok){e.next=13;break}return e.next=9,a.json();case 9:return r=e.sent,e.abrupt("return",r);case 13:return e.abrupt("return",void 0);case 14:case"end":return e.stop()}},e)})),n.setShowMonitoring=function(e){n.setState({isShowMonitor:e})},n.loadTraceFilesAsync=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceFilesAsync();case 3:t=e.sent,n.setState({traceFileArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceFileArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceFilesAsync=Object(p.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traceFiles"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.convertToSpeedscopeAsync=function(){var e=Object(p.a)(u.a.mark(function e(t){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traceFiles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:t})});case 2:if(!(a=e.sent)||!a.ok){e.next=9;break}return e.next=6,n.loadTraceFilesAsync();case 6:return e.abrupt("return",!0);case 9:return e.next=11,a.json();case 11:r=e.sent,alert(" Details: "+r.error);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.addBackend=function(e){e=e.toLowerCase();var t=n.getList();t.includes(e)||t.push(e),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.removeBackend=function(e){e=e.toLowerCase();var t=n.getList();t=t.filter(function(t){return t!==e}),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.disconnectBackend=function(){n.setState({baseUrl:"",isReady:!1,isBackendReady:!1})},n.connectToBackendAsync=function(){var e=Object(p.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=t.trim()).startsWith("http")||t.startsWith("https")){e.next=4;break}return e.abrupt("return",!1);case 4:return t.endsWith("/")&&(t=t.substring(0,t.length-1)),e.next=7,fetch(t+"/processes");case 7:if(!(a=e.sent)||!a.ok){e.next=13;break}return n.setState({isBackendReady:!0,baseUrl:t}),e.next=12,n.initializeAsync();case 12:return e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),n.manageProfile=function(e){n.setState({isManageProfile:e})},n.setManageProfile=function(e){n.setState({selectedProfileForManage:e})},n.loadProfilesAsync=Object(p.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getProfilesAsync();case 2:(t=e.sent).length>0?n.setState({profileArray:t}):n.setState({profileArray:void 0});case 4:case"end":return e.stop()}},e)})),n.getProfilesAsync=Object(p.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/profiles"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.selectProfile=function(e){n.setState({selectedProfile:e})},n.addNewProfileAsync=function(){var e=Object(p.a)(u.a.mark(function e(t){var a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/profiles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(a=e.sent)||!a.ok){e.next=7;break}return e.abrupt("return",a.json());case 7:return e.next=9,a.json();case 9:r=e.sent,alert(r);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.takeDumpAsync=function(){var e=Object(p.a)(u.a.mark(function e(t,a){var r,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isDumping:!0}),0,1,r=a?1:0,e.next=6,fetch("".concat(n.state.baseUrl,"/dumps"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,dumpType:r})});case 6:if(!(s=e.sent)||!s.ok){e.next=15;break}return e.next=10,n.loadTraceFilesAsync();case 10:return alert("Dump crated for process "+t),n.setState({isDumping:!1}),e.abrupt("return",!0);case 15:alert("Failed to create the dump for this process: "+t),n.setState({isDumping:!1});case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.state={processArray:void 0,traceSessionArray:void 0,traceFileArray:void 0,isReady:!1,isBackendReady:!1,backendUrlArray:n.getList(),baseUrl:"",profileArray:void 0,selectedProfile:void 0,selectedProfileForManage:void 0,isDumping:!1,selectedSession:void 0,isShowMonitor:!1,isManageProfile:!1},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e,t=this;if(this.state.isBackendReady){var n=this.state,a=n.isShowMonitor,r=n.selectedSession,s=n.isManageProfile,c=n.profileArray;if(!this.state.isReady)return null;e=a&&void 0!==r?o.a.createElement(O,{selectedEndpoint:this.state.baseUrl,traceSessionArray:this.state.traceSessionArray,isDumping:this.state.isDumping,processId:r.processId,sessionId:r.sessionId,exitMonitor:function(){t.setShowMonitoring(!1)},takeDumpAsync:this.takeDumpAsync.bind(this),startProfilingAsync:this.startProfilingAsync,stopProfilingAsync:this.stopProfilingAsync}):s?o.a.createElement(D,{profileArray:c,selectedProfile:this.state.selectedProfileForManage,setManageProfile:this.setManageProfile,addProfileAsync:this.addNewProfileAsync,refreshProfile:this.loadProfilesAsync}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"section"},o.a.createElement(P,{baseUrl:this.state.baseUrl,disconnectBackend:this.disconnectBackend}),o.a.createElement(S,{manageProfile:function(){return t.manageProfile(!0)},profileArray:this.state.profileArray,onSelected:this.selectProfile,selectedProfile:this.state.selectedProfile,onRefresh:this.loadProfilesAsync}),o.a.createElement(b,{refreshProcessAsync:this.loadProcessesAsync,startProfilingAsync:this.startProfilingAsync,startMonitoringAsync:this.startMonitoringAsync,takeDumpAsync:this.takeDumpAsync,processArray:this.state.processArray,isDumping:this.state.isDumping}),o.a.createElement(y,{traceSessions:this.state.traceSessionArray,stopProfilingAsync:this.stopProfilingAsync,stopMonitoringAsync:this.stopMonitoringAsync,loadTraceSessionsAsync:this.loadTraceSessionsAsync,setAsSelected:this.setSelectedSession}),o.a.createElement(g,{baseUrl:this.state.baseUrl,loadTraceFilesAsync:this.loadTraceFilesAsync,convertToSpeedscopeAsync:this.convertToSpeedscopeAsync,fileArray:this.state.traceFileArray})))}else e=o.a.createElement(w,{backendUrlArray:this.state.backendUrlArray,addBackend:this.addBackend,removeBackend:this.removeBackend,connectToBackendAsync:this.connectToBackendAsync});return o.a.createElement("div",{className:"dark-theme"},o.a.createElement(A,null),o.a.createElement("div",{className:"app-container"},e))}},{key:"getList",value:function(){var e=localStorage.getItem(this.BackendListKey);return null===e||""===e||"[]"===e?["http://localhost:9400"]:JSON.parse(e)}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[185,1,2]]]);
//# sourceMappingURL=main.209d9f99.chunk.js.map