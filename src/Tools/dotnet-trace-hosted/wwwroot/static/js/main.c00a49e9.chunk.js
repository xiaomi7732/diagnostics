(window["webpackJsonpdotnet-trace-ui"]=window["webpackJsonpdotnet-trace-ui"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(23)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(9),c=n.n(s),o=(n(15),n(1)),i=n.n(o),l=n(2),u=n(3),p=n(4),d=n(6),f=n(5),m=n(7),h=(n(17),n(18),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleRefresh=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),n.props.refreshProcessAsync();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.processArray||0===this.props.processArray.length?e=r.a.createElement("div",null,"There is no .NET Core processes."):(n=this.props.processArray.length,e=this.props.processArray.map(function(e,n){return r.a.createElement("div",{className:"process-line",key:n},r.a.createElement("span",{className:"process-id"},e.id)," ",r.a.createElement("span",{className:"process-name"},e.name)," ",r.a.createElement("span",{className:"process-path"},e.mainModule),r.a.createElement("input",{className:"button",type:"button",value:"Start Profiling",onClick:function(){console.debug("Start Profiling for session: ".concat(e.id)),t.props.startProfilingAsync(e.id)}}),r.a.createElement("input",{className:"button",type:"button",value:"Mini Dump",onClick:Object(l.a)(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.props.takeDumpAsync(e.id,!0);case 2:case"end":return n.stop()}},n)}))}),r.a.createElement("input",{className:"button",type:"button",value:"Heap Dump",onClick:function(){t.props.takeDumpAsync(e.id,!1)}}))})),r.a.createElement("div",{className:"processes"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Remote Process (",n,")"),r.a.createElement("input",{className:"button header-button refresh-button",type:"button",onClick:this.handleRefresh,value:"\ud83d\uddd8"})),e)}}]),t}(a.Component)),b=(n(19),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.traceSessions||0===this.props.traceSessions.length?e=r.a.createElement("div",null,"There's no trace sessions."):(n=this.props.traceSessions.length,e=r.a.createElement("div",{className:"session-container"},this.props.traceSessions.map(function(e,n){return r.a.createElement("div",{className:"session-line",key:n},r.a.createElement("div",{className:"process-id-part"},r.a.createElement("span",{className:"bold-text"},"ProcessId:"),r.a.createElement("span",null,e.processId),"\xa0"),r.a.createElement("div",{className:"session-id-part"},r.a.createElement("span",{className:"bold-text"},"SessionId:"),r.a.createElement("span",null,e.sessionId),"\xa0"),r.a.createElement("input",{className:"button",type:"button",value:"Stop Profiling",onClick:function(){console.debug("Stopping profiler: ".concat(e.processId,":").concat(e.sessionId)),t.props.stopProfilingAsync(e.processId,e.sessionId)}}))}))),r.a.createElement("div",{className:"trace-session"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Remote Trace Sessions (",n,")"),r.a.createElement("input",{className:"button header-button",type:"button",defaultValue:"\ud83d\uddd8",onClick:this.props.loadTraceSessionsAsync})),e)}}]),t}(a.PureComponent)),y=(n(20),function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.fileArray||0===this.props.fileArray.length?e=r.a.createElement("div",null,"There's no trace file."):(n=this.props.fileArray.length,e=r.a.createElement("div",null,this.props.fileArray.sort(function(e,t){return e.fileName>t.fileName?-1:1}).map(function(e,n){var a=e.fileName.toLowerCase().endsWith(".nettrace")?"nettrace":"speedscope";return r.a.createElement("div",{key:n,className:"trace-file-line"},r.a.createElement("div",{className:"trace-file"},r.a.createElement("a",{href:"".concat(t.props.baseUrl,"/TraceFiles/").concat(e.fileName)},e.fileName)),r.a.createElement("div",{className:"trace-file-size"},e.sizeInBytes," bytes"),"nettrace"===a&&r.a.createElement("input",{className:"button",type:"button",value:"Get speedscope file",onClick:function(){return t.props.convertToSpeedscopeAsync(e.fileName)}}))}))),r.a.createElement("div",{className:"trace-repo"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Remote Trace Files (",n,")"),r.a.createElement("input",{className:"button header-button",type:"button",value:"\ud83d\uddd8",onClick:Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.loadTraceFilesAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))})),r.a.createElement("div",{className:"speed-scope-tips"},"To open trace in ",r.a.createElement("a",{href:"https://speedscope.app",target:"_blank",rel:"noopener noreferrer"},"speedscope"),", download the ",r.a.createElement("span",null,"speedscope.json")," files to your local box and upload it to ",r.a.createElement("a",{href:"https://speedscope.app",target:"_blank",rel:"noopener noreferrer"},"speedscope.app"),"."),e)}}]),t}(a.PureComponent)),v=(n(21),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).handleConnectAsync=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({errorMessage:"",isConnecting:!0}),e.next=3,n.props.connectToBackendAsync(t);case 3:e.sent||n.setState({errorMessage:"Failed to connecting to backend: ".concat(t,"."),isConnecting:!1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handleAddBackend=function(e){e.preventDefault();var t=e.target.newBackend.value;t&&(n.props.addBackend(t),n.setState({newUrl:""}))},n.handleNewUrlChanged=function(e){n.setState({newUrl:e.target.value})},n.state={errorMessage:void 0,isConnecting:!1,newUrl:""},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this;return e=void 0===this.props.backendUrlArray||0===this.props.backendUrlArray.length?r.a.createElement("div",null,"Please add backend."):this.props.backendUrlArray.map(function(e,n){return r.a.createElement("div",{className:"backend-item-container",key:n},r.a.createElement("span",{className:"backend-url",onClick:Object(l.a)(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.handleConnectAsync(e);case 2:case"end":return n.stop()}},n)}))},e),r.a.createElement("input",{className:"button",type:"button",value:"Connect",onClick:Object(l.a)(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.handleConnectAsync(e);case 2:case"end":return n.stop()}},n)}))}),r.a.createElement("input",{className:"button",type:"button",value:"Remove",onClick:Object(l.a)(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.props.removeBackend(e);case 1:case"end":return n.stop()}},n)}))}))}),r.a.createElement("div",{className:"connect-backend"},r.a.createElement("h2",null,"Pick a backend"),e,!!this.state.isConnecting&&r.a.createElement("div",null,"Connecting . . ."),!!this.state.errorMessage&&r.a.createElement("div",null,this.state.errorMessage),r.a.createElement("h2",null,"Adding new Backend"),r.a.createElement("div",{className:"new-endpoint-container"},r.a.createElement("form",{onSubmit:this.handleAddBackend},r.a.createElement("label",{htmlFor:"newBackend"},"Type in a new endpoint:"),r.a.createElement("input",{className:"text-input",id:"newBackend",type:"textbox",placeholder:"http://localhost:9400",value:this.state.newUrl,onChange:this.handleNewUrlChanged}),r.a.createElement("div",null,r.a.createElement("span",{className:"tips"},"Tips: Press enter to add the endpoint.")))))}}]),t}(a.Component)),k=function(){return r.a.createElement("div",{className:"app-header"},r.a.createElement("h1",null,".NET Core Profiling Console"))},A=function(e){return r.a.createElement("div",{className:"connection-status"},r.a.createElement("h2",null,"Connection"),r.a.createElement("span",null,"\ud83d\udda7 You are connecting to: ",e.baseUrl),r.a.createElement("input",{className:"button",type:"button",onClick:e.disconnectBackend,value:"Disconnect"}))},E=(n(22),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).getValidProfile=function(){if(void 0!==n.props.profileArray)return n.props.profileArray.filter(function(e){return"none"!==e.name})},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,n=0,a=this.getValidProfile();return void 0!==a?(n=a.length,e=r.a.createElement("div",{className:"ProfileListContainer"},r.a.createElement("select",{value:this.props.selectedProfile,onChange:function(e){var n=e.target;n&&n.value&&t.props.onSelected(n.value)}},a.sort(function(e,t){return e>t?1:-1}).map(function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name,": ",e.description)})))):e="No tracing profile exist.",r.a.createElement("div",{className:"profile-picker"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,"Tracing Profiles (",n,")"),r.a.createElement("input",{className:"button header-button refresh-button",type:"button",onClick:this.props.onRefresh,value:"\ud83d\uddd8"})),e)}}]),t}(a.PureComponent)),g=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).BackendListKey="backendList",n.initializeAsync=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.loadProcessesAsync(),n.loadTraceSessionsAsync(),n.loadTraceFilesAsync(),n.LoadProfilesAsync()]);case 2:n.selectProfile("runtime-basic"),n.setState({isReady:!0});case 4:case"end":return e.stop()}},e)})),n.loadProcessesAsync=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getProcessesAsync();case 3:t=e.sent,n.setState({processArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({processArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getProcessesAsync=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/processes"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.startProfilingAsync=function(){var e=Object(l.a)(i.a.mark(function e(t){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,profile:n.state.selectedProfile})});case 2:if(a=e.sent,!(r=!!a&&a.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.stopProfilingAsync=function(){var e=Object(l.a)(i.a.mark(function e(t,a){var r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces/").concat(t,"?sessionId=").concat(a),{method:"DELETE"});case 2:if(r=e.sent,!(s=!!r&&r.ok)){e.next=7;break}return e.next=7,Promise.all([n.loadTraceSessionsAsync(),n.loadTraceFilesAsync()]);case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.loadTraceSessionsAsync=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceSessionsAsync();case 3:t=e.sent,n.setState({traceSessionArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceSessionArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceSessionsAsync=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/sessions"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.loadTraceFilesAsync=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceFilesAsync();case 3:t=e.sent,n.setState({traceFileArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceFileArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceFilesAsync=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traceFiles"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.convertToSpeedscopeAsync=function(){var e=Object(l.a)(i.a.mark(function e(t){var a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traceFiles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileName:t})});case 2:if(!(a=e.sent)||!a.ok){e.next=9;break}return e.next=6,n.loadTraceFilesAsync();case 6:return e.abrupt("return",!0);case 9:return e.next=11,a.json();case 11:r=e.sent,alert(" Details: "+r.error);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.addBackend=function(e){e=e.toLowerCase();var t=n.getList();t.includes(e)||t.push(e),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.removeBackend=function(e){e=e.toLowerCase();var t=n.getList();t=t.filter(function(t){return t!==e}),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.disconnectBackend=function(){n.setState({baseUrl:"",isReady:!1,isBackendReady:!1})},n.connectToBackendAsync=function(){var e=Object(l.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=t.trim()).startsWith("http")||t.startsWith("https")){e.next=4;break}return e.abrupt("return",!1);case 4:return t.endsWith("/")&&(t=t.substring(0,t.length-1)),e.next=7,fetch(t+"/processes");case 7:if(!(a=e.sent)||!a.ok){e.next=13;break}return n.setState({isBackendReady:!0,baseUrl:t}),e.next=12,n.initializeAsync();case 12:return e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),n.LoadProfilesAsync=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getProfilesAsync();case 2:(t=e.sent).length>0?n.setState({profileArray:t}):n.setState({profileArray:void 0});case 4:case"end":return e.stop()}},e)})),n.getProfilesAsync=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/profiles"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.selectProfile=function(e){n.setState({selectedProfile:e})},n.takeDumpAsync=function(){var e=Object(l.a)(i.a.mark(function e(t,a){var r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return 0,1,r=a?1:0,e.next=5,fetch("".concat(n.state.baseUrl,"/dumps"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t,dumpType:r})});case 5:if(!(s=e.sent)||!s.ok){e.next=13;break}return e.next=9,n.loadTraceFilesAsync();case 9:return alert("Dump crated for process "+t),e.abrupt("return",!0);case 13:alert("Failed to create the dump for this process: "+t);case 14:return e.abrupt("return",!1);case 15:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.state={processArray:void 0,traceSessionArray:void 0,traceFileArray:void 0,isReady:!1,isBackendReady:!1,backendUrlArray:n.getList(),baseUrl:"",profileArray:void 0,selectedProfile:void 0},n}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;return e=this.state.isBackendReady?this.state.isReady?r.a.createElement("div",null,r.a.createElement(A,{baseUrl:this.state.baseUrl,disconnectBackend:this.disconnectBackend}),r.a.createElement(E,{profileArray:this.state.profileArray,onSelected:this.selectProfile,selectedProfile:this.state.selectedProfile,onRefresh:this.LoadProfilesAsync}),r.a.createElement(h,{refreshProcessAsync:this.loadProcessesAsync,startProfilingAsync:this.startProfilingAsync,takeDumpAsync:this.takeDumpAsync,processArray:this.state.processArray}),r.a.createElement(b,{traceSessions:this.state.traceSessionArray,stopProfilingAsync:this.stopProfilingAsync,loadTraceSessionsAsync:this.loadTraceSessionsAsync}),r.a.createElement(y,{baseUrl:this.state.baseUrl,loadTraceFilesAsync:this.loadTraceFilesAsync,convertToSpeedscopeAsync:this.convertToSpeedscopeAsync,fileArray:this.state.traceFileArray})):null:r.a.createElement(v,{backendUrlArray:this.state.backendUrlArray,addBackend:this.addBackend,removeBackend:this.removeBackend,connectToBackendAsync:this.connectToBackendAsync}),r.a.createElement("div",{className:"dark-theme"},r.a.createElement(k,null),r.a.createElement("div",{className:"app-container"},e))}},{key:"getList",value:function(){var e=localStorage.getItem(this.BackendListKey);return null===e||""===e||"[]"===e?["http://localhost:9400"]:JSON.parse(e)}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,1,2]]]);
//# sourceMappingURL=main.c00a49e9.chunk.js.map