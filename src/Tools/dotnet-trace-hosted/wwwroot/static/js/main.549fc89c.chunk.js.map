{"version":3,"sources":["Models/CounterScores.ts","Models/ColorPalette.ts","Components/Processes.tsx","Components/TraceSessions.tsx","Components/TraceRepo.tsx","Components/ConnectingToBackend.tsx","Components/AppHeader.tsx","Components/ConnectionStatus.tsx","Components/ProfilePicker.tsx","Components/MonitorViz.tsx","Components/MonitorPage.tsx","Components/ProfileManager.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["CounterScores","ColorPalette","Processes","handleRefresh","event","a","preventDefault","stopPropagation","props","refreshProcessAsync","content","len","undefined","this","processArray","length","dumpButtonClassName","isDumping","map","process","index","className","key","id","name","mainModule","type","value","onClick","startProfilingAsync","startMonitoringAsync","disabled","takeDumpAsync","Component","TraceSessions","list","traceSessions","session","processId","sessionId","stopProfilingAsync","stopMonitoringAsync","setAsSelected","defaultValue","loadTraceSessionsAsync","PureComponent","TraceRepo","fileArray","sort","b","fileName","file","fileFormat","toLowerCase","endsWith","fileSize","filesize","sizeInBytes","round","href","baseUrl","convertToSpeedscopeAsync","loadTraceFilesAsync","target","rel","ConnectingToBackend","handleConnectAsync","url","setState","errorMessage","isConnecting","connectToBackendAsync","handleAddBackend","e","newValue","newBackend","addBackend","newUrl","handleNewUrlChanged","state","backendUrlArray","removeBackend","onSubmit","htmlFor","placeholder","onChange","AppHeader","isHome","goHome","ConnectionStatus","disconnectBackend","ProfileViewer","getValidProfile","profileArray","filter","p","count","selectedProfile","onSelected","profile","description","manageProfile","onRefresh","MonitorViz","updateWindowDimensions","width","window","innerWidth","metricsNameComparer","name1","name2","getScore","fallBack","score","counterScore","startsWith","console","warn","addEventListener","removeEventListener","report","size","chartWidth","chartHeight","Array","from","keys","metricName","idxKey","reportItem","get","data","x","color","Object","style","display","flexFlow","height","margin","top","right","left","bottom","x1","y1","x2","y2","offset","stopColor","stopOpacity","stroke","dataKey","strokeDasharray","vertical","strokeWidth","wrapperStyle","backgroundColor","isAnimationActive","fillOpacity","fill","React","MonitorPage","onUpdate","metricValue","newReport","reportCache","has","array","maxDataPointCount","shift","push","set","lastUpdate","Date","now","getTime","debug","forEach","v","k","Map","connection","signalR","withUrl","selectedEndpoint","withAutomaticReconnect","build","on","start","catch","err","alert","counterHub","stop","exitMonitor","traceSessionArray","profilingSession","find","ProfileManager","_newProfileInputId","getId","_newProfileDescriptionId","_newProviderNameId","_newProviderKeywordId","_newProviderEventLevelId","_newProviderFilterId","handleNewProfileName","newProfileName","handleNewProfileDescription","newProfileDescription","handleNewProfileSubmit","addProfileAsync","providers","isShowNewProfileModel","refreshProfile","handleDeleteProfileSubmit","deleteProfileAsync","isConfirmDeletingProfile","setManageProfile","handleAddProvider","newProvider","keywordsHex","appendProvider","eventLevel","filterData","isShowAddProvider","handleChangeForNewProvider","propertyName","newState","pickFirstProfile","profileDetails","exportProfiles","effectiveProfileArray","profileList","p1","p2","title","checked","log","selected","Modal","isOpen","isBlocking","role","isDarkOverlay","provider","handleRemoveProvider","readOnly","JSON","stringify","FileSaver","removeProvider","App","BackendListKey","initializeAsync","Promise","all","loadProcessesAsync","loadProfilesAsync","selectProfile","isReady","getProcessesAsync","processes","fetch","response","ok","json","results","method","headers","body","result","getTraceSessionsAsync","setSelectedSession","selectedSession","isShowMonitor","getReportAsync","setShowMonitoring","getTraceFilesAsync","files","traceFileArray","error","getList","includes","localStorage","setItem","item","isBackendReady","trim","substring","isManageProfile","selectedProfileForManage","getProfilesAsync","addNewProfileAsync","newProfile","updateProfileAsync","encodeURI","isMini","dumpType","bind","urlListSerialized","getItem","parse","selectedProvider","assign","Boolean","location","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.549fc89c.chunk.js","sourcesContent":["export enum CounterScores {\r\n    // CPU\r\n    'CPU Usage',\r\n    'Number of Active Timers',\r\n    'Exception Count',\r\n    'ThreadPool Thread Count',\r\n    'ThreadPool Queue Length',\r\n    'ThreadPool Completed Work Item Count',\r\n\r\n    // Memory\r\n    'Working Set',\r\n    'Allocation Rate',\r\n    'Number of Assemblies Loaded',\r\n\r\n    'GC Heap Size',\r\n    '% Time in GC since last GC',\r\n    'Gen 0 Size',\r\n    'Gen 0 GC Count',\r\n    'Gen 1 Size',\r\n    'Gen 1 GC Count',\r\n    'LOH Size',\r\n    'Gen 2 Size',\r\n    'Gen 2 GC Count',\r\n\r\n    // Requests\r\n    'Current Requests',\r\n    'Failed Requests',\r\n    'Total Requests',\r\n    'Request Rate',\r\n    'Monitor Lock Contention Count',\r\n}","export enum ColorPalette {\r\n    '#005697',\r\n    '#456990',\r\n    '#3F5E5A',\r\n    '#C52184',\r\n    '#5FAD41',\r\n    '#54F2F2',\r\n}","import React, { Component, ReactNode } from 'react';\r\nimport Process from '../Models/Process';\r\nimport './Processes.css';\r\n\r\ninterface ProcessesProps {\r\n    refreshProcessAsync: () => Promise<void>;\r\n    startProfilingAsync: (processId: number) => Promise<boolean>;\r\n    startMonitoringAsync: (processId: number) => Promise<boolean>;\r\n    takeDumpAsync: (processId: number, isMini: boolean) => Promise<boolean>;\r\n    isDumping: boolean;\r\n    processArray: Process[] | undefined;\r\n}\r\n\r\nexport default class Processes extends Component<ProcessesProps, {}>{\r\n    render(): ReactNode {\r\n        let content;\r\n        let len = 0;\r\n\r\n        if (this.props.processArray === undefined || this.props.processArray.length === 0) {\r\n            content = (<div>\r\n                There is no .NET Core processes.\r\n            </div>);\r\n        } else {\r\n            len = this.props.processArray.length;\r\n            const dumpButtonClassName: string = 'button' + (this.props.isDumping ? ' disabled' : '');\r\n            content = this.props.processArray.map((process: Process, index: number) => {\r\n                return (<div className='process-line' key={index}>\r\n                    <span className='process-id'>{process.id}</span> <span className='process-name'>{process.name}</span> <span className='process-path'>{process.mainModule}</span>\r\n                    <input className='button' type='button' value='&#x25B6; Start Profiling'\r\n                        onClick={() => {\r\n                            this.props.startProfilingAsync(process.id)\r\n                        }} />\r\n\r\n                    <input className='button' type='button' value='&#x25B6; Start Monitoring'\r\n                        onClick={() => {\r\n                            this.props.startMonitoringAsync(process.id);\r\n                        }} />\r\n\r\n                    <input className={dumpButtonClassName} type='button' value='&#128248; Mini Dump' disabled={this.props.isDumping}\r\n                        onClick={async () => {\r\n                            await this.props.takeDumpAsync(process.id, true)\r\n                        }} />\r\n                    <input className={dumpButtonClassName} type='button' value='&#128248; Heap Dump' disabled={this.props.isDumping}\r\n                        onClick={async () => {\r\n                            await this.props.takeDumpAsync(process.id, false)\r\n                        }} />\r\n                </div>)\r\n            });\r\n        }\r\n\r\n        return (<div className='processes'>\r\n            <div className='header'>\r\n                <h2>Remote Process ({len})</h2>\r\n                <input className='button header-button refresh-button' type='button' onClick={this.handleRefresh} value='&#x1f5d8;'></input>\r\n            </div>\r\n            {this.props.isDumping ? <div>Dump in progress . . .</div> : null}\r\n            {content}\r\n        </div>\r\n        );\r\n    }\r\n\r\n    private handleRefresh = async (event: React.MouseEvent<HTMLInputElement, MouseEvent>) => {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        this.props.refreshProcessAsync();\r\n    }\r\n}\r\n\r\n\r\n","import React, { PureComponent } from 'react';\r\nimport { TraceSession } from '../Models/TraceSession';\r\nimport './TraceSessions.css';\r\n\r\ninterface TraceSessionsProps {\r\n    setAsSelected: (session: TraceSession) => void;\r\n    loadTraceSessionsAsync: () => Promise<void>;\r\n    stopProfilingAsync: (processId: number, sessionId: number) => Promise<boolean>;\r\n    stopMonitoringAsync: (processId: number, sessionId: number) => Promise<boolean>;\r\n    traceSessions: TraceSession[] | undefined;\r\n}\r\n\r\nexport default class TraceSessions extends PureComponent<TraceSessionsProps, {}>{\r\n    render() {\r\n        let list;\r\n        let len: number = 0;\r\n\r\n        if (this.props.traceSessions === undefined || this.props.traceSessions.length === 0) {\r\n            list = <div>There's no trace sessions.</div>\r\n        }\r\n        else {\r\n            len = this.props.traceSessions.length;\r\n            list = <div className='session-container'>\r\n                {this.props.traceSessions.map((session, index) => {\r\n                    return (<div className='session-line' key={index}>\r\n                        <div className='process-id-part'>\r\n                            <span className='bold-text'>ProcessId:&nbsp;</span>\r\n                            <span>{session.processId}</span>\r\n                        </div>\r\n                        <div className='session-id-part'>\r\n                            <span className='bold-text'>SessionId:&nbsp;</span>\r\n                            <span>{session.sessionId}</span>\r\n                        </div>\r\n                        {session.type === 0 && <input className='button' type='button' value='&#x25A0; Stop Profiling' onClick={() => {\r\n                            this.props.stopProfilingAsync(session.processId, session.sessionId);\r\n                        }} />}\r\n                        {session.type === 1 && <input className='button' type='button' value='&#x25A0; Stop Monitoring' onClick={() => {\r\n                            this.props.stopMonitoringAsync(session.processId, session.sessionId);\r\n                        }} />}\r\n                        {session.type === 1 && <input className='button' type='button' value='&#x1F5E0; Visualize' onClick={() => {\r\n                            this.props.setAsSelected(session);\r\n                        }} />}\r\n                    </div>);\r\n                })}\r\n            </div>\r\n        }\r\n        return (<div className='trace-session'>\r\n            <div className='header'>\r\n                <h2>Remote Trace Sessions ({len})</h2>\r\n                <input className='button header-button' type='button' defaultValue='&#x1f5d8;' onClick={this.props.loadTraceSessionsAsync} />\r\n            </div>\r\n            {list}\r\n        </div>);\r\n    }\r\n}","import React, { PureComponent } from 'react';\r\nimport TraceFile from '../Models/TraceFile';\r\nimport * as filesize from 'filesize';\r\nimport './TraceRepo.css';\r\n\r\ninterface TraceRepoProps {\r\n    baseUrl: string;\r\n    loadTraceFilesAsync: () => Promise<void>;\r\n    convertToSpeedscopeAsync: (fileName: string) => Promise<boolean>;\r\n    fileArray: TraceFile[] | undefined;\r\n}\r\n\r\nexport default class TraceRepo extends PureComponent<TraceRepoProps, {}>{\r\n    render() {\r\n        let content;\r\n        let len: number = 0;\r\n        if (this.props.fileArray === undefined || this.props.fileArray.length === 0) {\r\n            content = <div>There's no trace file.</div>\r\n        } else {\r\n            len = this.props.fileArray.length;\r\n            content = <div>\r\n                {this.props.fileArray.sort((a, b) => {\r\n                    return a.fileName > b.fileName ? -1 : 1;\r\n                }).map((file, index) => {\r\n                    const fileFormat = file.fileName.toLowerCase().endsWith('.nettrace') ? 'nettrace' : 'speedscope';\r\n                    const fileSize = filesize.default(file.sizeInBytes, { round: 0 });\r\n                    return <div key={index} className='trace-file-line'>\r\n                        <div className='trace-file'>\r\n                            <a href={`${this.props.baseUrl}/TraceFiles/${file.fileName}`}>{file.fileName}</a>\r\n                        </div>\r\n                        <div className='trace-file-size'>\r\n                            {fileSize}\r\n                        </div>\r\n                        {(fileFormat === 'nettrace') && <input className='button' type='button' value='Get speedscope file' onClick={() => this.props.convertToSpeedscopeAsync(file.fileName)}></input>}\r\n                        {/* <input className='button' type='button' value='Upload to SP Backend' onClick={() => alert(`Not implemented: ${file.fileName}`)} /> */}\r\n                    </div>\r\n                })}\r\n            </div>\r\n        }\r\n        return (<div className='trace-repo'>\r\n            <div className='header'>\r\n                <h2>Remote Trace Files ({len})</h2>\r\n                <input className='button header-button' type='button' value='&#x1f5d8;' onClick={async () => await this.props.loadTraceFilesAsync()}></input>\r\n            </div>\r\n            <div className='speed-scope-tips'>\r\n                To open trace in <a href='https://speedscope.app' target='_blank' rel='noopener noreferrer'>speedscope</a>, download the <span>speedscope.json</span> files to your local box and upload it to <a href='https://speedscope.app' target='_blank' rel='noopener noreferrer'>speedscope.app</a>.\r\n            </div>\r\n            {content}\r\n        </div>)\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './ConnectingToBackend.css';\r\n\r\ninterface ConnectingToBackendProps {\r\n    backendUrlArray: string[] | undefined,\r\n    connectToBackendAsync: (url: string) => Promise<boolean>;\r\n    addBackend: (newUrl: string) => void;\r\n    removeBackend: (targetUrl: string) => void;\r\n}\r\n\r\ninterface ConnectingToBackendState {\r\n    errorMessage: string | undefined;\r\n    isConnecting: boolean;\r\n    newUrl: string;\r\n}\r\n\r\nexport default class ConnectingToBackend extends Component<ConnectingToBackendProps, ConnectingToBackendState>{\r\n    constructor(props: ConnectingToBackendProps) {\r\n        super(props);\r\n        this.state = {\r\n            errorMessage: undefined,\r\n            isConnecting: false,\r\n            newUrl: '',\r\n        };\r\n    }\r\n\r\n    render() {\r\n        let content;\r\n        if (this.props.backendUrlArray === undefined || this.props.backendUrlArray.length === 0) {\r\n            content = <div>Please add backend.</div>\r\n        } else {\r\n            content = this.props.backendUrlArray.map((url, index) => {\r\n                return <div className='backend-item-container' key={index}>\r\n                    <span className='backend-url' onClick={async () => {\r\n                        await this.handleConnectAsync(url);\r\n                    }}>{url}</span>\r\n                    <input className='button' type='button' value='Connect' onClick={async () => {\r\n                        await this.handleConnectAsync(url);\r\n                    }}></input>\r\n                    <input className='button' type='button' value='Remove' onClick={async () => {\r\n                        this.props.removeBackend(url);\r\n                    }}></input>\r\n                </div>\r\n            })\r\n        }\r\n\r\n        return (\r\n            <div className='connect-backend'>\r\n                <h2>Pick a backend</h2>\r\n                {content}\r\n                {!!this.state.isConnecting && <div>Connecting . . .</div>}\r\n                {!!this.state.errorMessage && <div>{this.state.errorMessage}</div>}\r\n\r\n                <h2>Adding new Backend</h2>\r\n                <div className='new-endpoint-container'>\r\n                    <form onSubmit={this.handleAddBackend}>\r\n                        <label htmlFor='newBackend'>Type in a new endpoint:</label>\r\n                        <input className='text-input' id='newBackend' type='textbox' placeholder='http://localhost:9400'\r\n                            value={this.state.newUrl} onChange={this.handleNewUrlChanged} />\r\n                        <div>\r\n                            <span className='tips'>Tips: Press enter to add the endpoint.</span>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    handleConnectAsync = async (url: string) => {\r\n        this.setState({\r\n            errorMessage: '',\r\n            isConnecting: true,\r\n        });\r\n        const result = await this.props.connectToBackendAsync(url);\r\n        if (!result) {\r\n            this.setState({\r\n                errorMessage: `Failed to connecting to backend: ${url}.`,\r\n                isConnecting: false,\r\n            });\r\n        }\r\n    }\r\n\r\n    handleAddBackend = (e: React.FormEvent<HTMLFormElement>) => {\r\n        e.preventDefault();\r\n        const target = e.target as any;\r\n        const newValue = target.newBackend.value;\r\n        if (!!newValue) {\r\n            this.props.addBackend(newValue);\r\n            this.setState({\r\n                newUrl: ''\r\n            });\r\n        }\r\n    }\r\n\r\n    handleNewUrlChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            newUrl: e.target.value,\r\n        });\r\n    }\r\n}","import React from 'react';\r\nexport const AppHeader: React.FunctionComponent<{ isHome: boolean, goHome: () => void }> = ({ isHome, goHome }) => (\r\n    <div className='app-header'>\r\n        {!isHome && <div className='back-home-button' onClick={goHome}>&lt;- Back</div>}\r\n        <h1>.NET Core Profiling Console</h1>\r\n    </div>\r\n);","import React from 'react';\r\n\r\ninterface ConnectionStatusProps {\r\n    baseUrl: string;\r\n\r\n    disconnectBackend: () => void;\r\n}\r\n\r\nexport const ConnectionStatus = (props: ConnectionStatusProps) => (\r\n    <div className='connection-status'>\r\n        <h2>Connection</h2>\r\n        <span>&#x1f5a7; You are connecting to: {props.baseUrl}</span>\r\n        <input className='button' type='button' onClick={props.disconnectBackend} value='Disconnect'></input>\r\n    </div>\r\n);","import React, { PureComponent } from 'react';\r\nimport { Profile } from '../Models/Profile';\r\nimport './ProfilePicker.css';\r\n\r\ninterface ProfileViewerProps {\r\n    profileArray: Profile[] | undefined;\r\n    selectedProfile: string | undefined;\r\n    onSelected: (newValue: string) => void;\r\n    onRefresh: () => void;\r\n    manageProfile: () => void;\r\n}\r\n\r\nexport default class ProfileViewer extends PureComponent<ProfileViewerProps, any> {\r\n    render() {\r\n        let count = 0;\r\n        let content;\r\n        const profileArray = this.getValidProfile();\r\n\r\n        if (profileArray !== undefined) {\r\n            count = profileArray.length;\r\n            content = (<div className='ProfileListContainer'>\r\n                <select value={this.props.selectedProfile} onChange={e => {\r\n                    const target = e.target as any;\r\n                    if (!!target && !!target.value) {\r\n                        this.props.onSelected(target.value);\r\n                    }\r\n                }}>\r\n                    {\r\n                        profileArray.sort((a, b) => a > b ? 1 : -1).map((profile) => {\r\n                            return <option key={profile.name} value={profile.name}>{profile.name}: {profile.description}</option>;\r\n                        })\r\n                    }</select>\r\n                <input type='button' className='button' value='Manage ...' onClick={this.props.manageProfile} />\r\n            </div>);\r\n        } else {\r\n            content = \"No tracing profile exist.\"\r\n        }\r\n        return <div className='profile-picker'>\r\n            <div className='header'>\r\n                <h2>Tracing Profiles ({count})</h2>\r\n                <input className='button header-button refresh-button' type='button' onClick={this.props.onRefresh} value='&#x1f5d8;'></input>\r\n            </div>\r\n            {content}\r\n        </div>\r\n    }\r\n\r\n    getValidProfile: () => Profile[] | undefined = () => {\r\n        if (this.props.profileArray === undefined) {\r\n            return undefined;\r\n        }\r\n        return this.props.profileArray.filter(p => p.name !== 'none');\r\n    }\r\n}","import React from 'react';\r\nimport { AreaChart, YAxis, XAxis, CartesianGrid, Area, Tooltip } from 'recharts';\r\nimport './MonitorViz.css';\r\nimport { CounterScores } from '../Models/CounterScores';\r\nimport { ColorPalette } from '../Models/ColorPalette';\r\n\r\ninterface MonitorVizProps {\r\n    report: Map<string, number[]>;\r\n}\r\n\r\ninterface MonitorVizState {\r\n    width: number;\r\n}\r\n\r\nexport default class MonitorViz extends React.Component<MonitorVizProps, MonitorVizState> {\r\n    constructor(props: MonitorVizProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            width: 0,\r\n        };\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.updateWindowDimensions();\r\n        window.addEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('resize', this.updateWindowDimensions);\r\n    }\r\n\r\n    render() {\r\n        const { width } = this.state;\r\n        const { report } = this.props;\r\n        let content;\r\n        if (report === undefined || report.size === 0) {\r\n            content = <div className='data-loading-message'>Visualization data not available.</div>\r\n        } else {\r\n            let chartWidth = width < 600 ? width - 24 : width / 3 - 8;\r\n            if (chartWidth < 300) {\r\n                chartWidth = 300;\r\n            }\r\n            let chartHeight = chartWidth * 2 / 4;\r\n            if (chartHeight < 200) {\r\n                chartHeight = 200;\r\n            }\r\n\r\n            content = <>{\r\n                Array.from(report.keys()).sort(this.metricsNameComparer).map((metricName, idxKey) => {\r\n                    const reportItem = report.get(metricName);\r\n                    if (reportItem !== undefined) {\r\n                        const data = reportItem.map((value, index) => { return { key: metricName, value: value, x: index } }) as ReadonlyArray<object>;\r\n                        const color = ColorPalette[idxKey % (Object.keys(ColorPalette).length / 2)];\r\n\r\n                        return <div key={idxKey} style={{ display: 'flex', flexFlow: 'column' }} >\r\n                            <h4 className='chart-title'>{metricName}</h4>\r\n                            <AreaChart\r\n                                width={chartWidth}\r\n                                height={chartHeight}\r\n                                data={data}\r\n                                margin={{ top: 5, right: 20, left: 10, bottom: 5 }}\r\n                            >\r\n                                <defs>\r\n                                    <linearGradient id={color} x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n                                        <stop offset=\"5%\" stopColor={color} stopOpacity={0.6} />\r\n                                        <stop offset=\"95%\" stopColor={color} stopOpacity={.2} />\r\n                                    </linearGradient>\r\n                                </defs>\r\n                                <XAxis stroke='white' dataKey='x' type='number' />\r\n                                <YAxis stroke='white' type='number' />\r\n                                <CartesianGrid strokeDasharray=\"5 2\" vertical={false} strokeWidth='1' stroke='#888888' />\r\n                                <Tooltip wrapperStyle={{ color: 'blue', backgroundColor: 'red' }} isAnimationActive={false} />\r\n                                <Area type=\"monotone\" dataKey=\"value\" strokeWidth={2} stroke={color} fillOpacity={1} fill={\"url(#\" + color + \")\"}\r\n                                    isAnimationActive={false}>\r\n                                </Area>\r\n                            </AreaChart>\r\n                        </div>\r\n                    } else {\r\n                        return null;\r\n                    }\r\n                })\r\n            }\r\n            </>\r\n        }\r\n\r\n        return <div className='monitor-viz'>\r\n            {content}\r\n        </div>;\r\n    }\r\n\r\n    private updateWindowDimensions = () => {\r\n        this.setState({ width: window.innerWidth });\r\n    }\r\n\r\n    private metricsNameComparer: (name1: string, name2: string) => number = (name1, name2) => {\r\n        const fallback = 1000000;\r\n        const n1Score = this.getScore(name1, fallback);\r\n        const n2Score = this.getScore(name2, fallback);\r\n        return n1Score - n2Score;\r\n    }\r\n\r\n    private getScore: (name: string, fallBack: number) => number = (name, fallBack) => {\r\n        let score = fallBack;\r\n        if (name === null || name === undefined) {\r\n            return fallBack;\r\n        }\r\n        for (let counterScore in CounterScores) {\r\n            if (name.startsWith(counterScore)) {\r\n                score = +CounterScores[counterScore];\r\n                break;\r\n            }\r\n        }\r\n        if (score === fallBack) {\r\n            console.warn(name + ' is an unknown metrics.');\r\n        }\r\n        return score;\r\n    }\r\n}","import * as React from 'react';\r\nimport MonitorViz from './MonitorViz';\r\nimport './MonitorPage.css';\r\nimport { TraceSession } from '../Models/TraceSession';\r\nimport * as signalR from \"@microsoft/signalr\";\r\n\r\ninterface MonitorPageProps {\r\n    processId: number;\r\n    sessionId: number;\r\n    isDumping: boolean;\r\n    traceSessionArray: TraceSession[] | undefined;\r\n    selectedEndpoint: string;\r\n\r\n    exitMonitor: () => void;\r\n    takeDumpAsync: (processId: number, isMini: boolean) => Promise<any>;\r\n    startProfilingAsync: (processId: number) => Promise<boolean>;\r\n    stopProfilingAsync: (processId: number, sessionId: number) => Promise<boolean>;\r\n}\r\n\r\ninterface MonitorPageStates {\r\n    report: Map<string, number[]>;\r\n    counterHub: signalR.HubConnection | null;\r\n}\r\n\r\nclass MonitorPage extends React.Component<MonitorPageProps, MonitorPageStates> {\r\n    constructor(props: MonitorPageProps) {\r\n        super(props);\r\n\r\n        let connection: signalR.HubConnection | null = new signalR.HubConnectionBuilder()\r\n            .withUrl(`${this.props.selectedEndpoint}/counterHub`)\r\n            .withAutomaticReconnect()\r\n            .build();\r\n\r\n        connection.on(\"updateCounterAsync\", this.onUpdate);\r\n\r\n        connection.start().catch(err => { alert(err); connection = null; });\r\n\r\n        this.state = {\r\n            report: new Map(),\r\n            counterHub: connection,\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.state.counterHub !== null) {\r\n            this.state.counterHub.stop();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { processId,\r\n            sessionId,\r\n            exitMonitor,\r\n            takeDumpAsync,\r\n            isDumping,\r\n            traceSessionArray,\r\n            startProfilingAsync,\r\n            stopProfilingAsync,\r\n        } = this.props;\r\n\r\n        const dumpButtonClassName: string = 'button' + (isDumping ? ' disabled' : '');\r\n        const profilingSession = traceSessionArray === undefined ? undefined :\r\n            traceSessionArray.find(session => session.processId === processId && session.processId !== sessionId && session.type === 0);\r\n        return <div className='monitor-page'>\r\n            <div className='header'>\r\n                <h2>Monitoring</h2>\r\n                <h3>Session: {sessionId} Process: {processId}</h3>\r\n\r\n                <input type='button' value='Heap Dump' className={dumpButtonClassName} onClick={async () => await takeDumpAsync(processId, false)}\r\n                    disabled={isDumping} />\r\n                <input type='button' value='Mini Dump' className={dumpButtonClassName} onClick={async () => await takeDumpAsync(processId, true)}\r\n                    disabled={isDumping} />\r\n\r\n                {!!profilingSession &&\r\n                    <input type='button' value='Stop Profiling' className={dumpButtonClassName} onClick={async () => {\r\n                        if (profilingSession !== undefined) {\r\n                            await stopProfilingAsync(profilingSession.processId, profilingSession.sessionId);\r\n                        }\r\n                    }}\r\n                    />}\r\n                {!profilingSession &&\r\n                    <input type='button' value='Start Profiling' className={dumpButtonClassName} onClick={async () => {\r\n                        await startProfilingAsync(processId);\r\n                    }}\r\n                    />}\r\n                <input type='button' value='Back' className='button' onClick={exitMonitor} />\r\n            </div>\r\n            <div className='viz'>\r\n                <MonitorViz report={this.state.report} />\r\n            </div>\r\n        </div>\r\n    }\r\n\r\n    private onUpdate:\r\n        (processId: number, sessionId: number, metricName: string, metricValue: number) => void\r\n        = (processId, sessionId, metricName, metricValue) => {\r\n            if (processId === this.props.processId && sessionId === this.props.sessionId) {\r\n                const newReport = this.reportCache;\r\n                if (newReport.has(metricName)) {\r\n                    // Exists\r\n                    const array = newReport.get(metricName);\r\n                    if (array != null) {\r\n                        while (array.length >= this.maxDataPointCount) {\r\n                            array.shift();\r\n                        }\r\n                        array.push(metricValue);\r\n                        newReport.set(metricName, array);\r\n                    }\r\n                } else {\r\n                    // Doesn't exist\r\n                    newReport.set(metricName, [metricValue]);\r\n                }\r\n\r\n                // Update no frequent than 1 second.\r\n                this.reportCache = newReport;\r\n                if (this.lastUpdate === undefined) {\r\n                    this.lastUpdate = new Date();\r\n                    this.setState({\r\n                        report: this.reportCache,\r\n                    });\r\n                } else {\r\n                    const now = new Date();\r\n                    const delta = now.getTime() - this.lastUpdate.getTime();\r\n                    if (delta >= 500) {\r\n                        this.lastUpdate = now;\r\n\r\n                        console.debug('Report:');\r\n                        newReport.forEach((v, k) => {\r\n                            console.debug(`${k}:${v.length}`);\r\n                        });\r\n\r\n                        this.setState({\r\n                            report: newReport\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n    private reportCache: Map<string, number[]> = new Map();\r\n    private lastUpdate: Date | undefined = undefined;\r\n\r\n    readonly maxDataPointCount: number = 60;\r\n}\r\n\r\nexport default MonitorPage;","import React, { ChangeEvent, FormEvent } from 'react';\r\nimport { Profile } from '../Models/Profile';\r\nimport { Modal } from 'office-ui-fabric-react/lib/Modal';\r\nimport './ProfileManager.css';\r\nimport { getId } from '@uifabric/utilities';\r\nimport { Provider } from '../Models/Provider';\r\nimport * as FileSaver from 'file-saver';\r\n\r\ninterface IProfileManagerProps {\r\n    profileArray: Profile[] | undefined;\r\n    selectedProfile: Profile | undefined;\r\n\r\n    setManageProfile: (value: Profile | undefined) => void;\r\n    addProfileAsync: (newProfile: Profile) => Promise<Profile>;\r\n    deleteProfileAsync: (name: string) => Promise<boolean>;\r\n    refreshProfile: () => void;\r\n    appendProvider: (newProvider: Provider) => void;\r\n    removeProvider: (name: string) => void;\r\n}\r\n\r\ninterface IProfileManagerState {\r\n    // New Profile\r\n    isShowNewProfileModel: boolean;\r\n    newProfileName: string;\r\n    newProfileDescription: string;\r\n    // Delete Profile\r\n    isConfirmDeletingProfile: boolean;\r\n    // Add Provider\r\n    isShowAddProvider: boolean;\r\n    newProvider: Provider;\r\n}\r\n\r\nexport class ProfileManager extends React.Component<IProfileManagerProps, IProfileManagerState> {\r\n    private readonly _newProfileInputId = getId('_newProfileInputId');\r\n    private readonly _newProfileDescriptionId = getId('_newProfileDescriptionId');\r\n\r\n    private readonly _newProviderNameId = getId('_newProviderNameId');\r\n    private readonly _newProviderKeywordId = getId('_newProviderKeywordId');\r\n    private readonly _newProviderEventLevelId = getId('_newProviderEventLevelId');\r\n    private readonly _newProviderFilterId = getId('_newProviderFilterId');\r\n\r\n\r\n    constructor(props: IProfileManagerProps) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            isShowNewProfileModel: false,\r\n            isConfirmDeletingProfile: false,\r\n            newProfileName: '',\r\n            newProfileDescription: '',\r\n\r\n            isShowAddProvider: false,\r\n            newProvider: {\r\n                name: '',\r\n                keywordsHex: '0x0',\r\n                filterData: '',\r\n                eventLevel: 5,\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.pickFirstProfile();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.pickFirstProfile();\r\n    }\r\n\r\n    render() {\r\n        const { profileArray, selectedProfile } = this.props;\r\n        const effectiveProfileArray = profileArray === undefined ? undefined : profileArray.filter(p => p.name !== 'none');\r\n\r\n        let profileList = null;\r\n        if (effectiveProfileArray !== undefined) {\r\n            profileList = effectiveProfileArray.sort((p1, p2) => {\r\n                if (p1.name > p2.name) return 1;\r\n                return -1;\r\n            }).map((profile, index) => {\r\n                return <div className='ProfileNameRadioButton' key={index} title={profile.name}>\r\n                    <input type='radio'\r\n                        name='profileName'\r\n                        value={profile.name}\r\n                        checked={!!selectedProfile && selectedProfile.name === profile.name}\r\n                        onChange={e => {\r\n                            console.log(e.target.value);\r\n                            if (!!e.target && !!e.target.value) {\r\n                                const selected = effectiveProfileArray.find(p => p.name === e.target.value)\r\n                                this.props.setManageProfile(selected);\r\n                            }\r\n                        }}\r\n                    />{profile.name}\r\n                </div>;\r\n            });\r\n            profileList = <div>\r\n                {profileList}\r\n                <Modal\r\n                    isOpen={this.state.isShowNewProfileModel}\r\n                    isBlocking={true}>\r\n                    <div className='dialog-container dark-theme'>\r\n                        <div className='title-container'>Add a Profile</div>\r\n                        <div className='content-container' role='presentation'>\r\n                            <form onSubmit={this.handleNewProfileSubmit}>\r\n                                <div role='presentation'>\r\n                                    <label htmlFor={this._newProfileInputId}>Profile Name:</label>\r\n                                    <input id={this._newProfileInputId} type='input' value={this.state.newProfileName} onChange={this.handleNewProfileName}\r\n                                        placeholder='New profile name.'></input>\r\n                                </div>\r\n                                <div role='presentation'>\r\n                                    <label htmlFor={this._newProfileDescriptionId}>Description:</label>\r\n                                    <input id={this._newProfileDescriptionId} type='input' value={this.state.newProfileDescription} onChange={this.handleNewProfileDescription}\r\n                                        placeholder='Description of the Profile.'></input>\r\n                                </div>\r\n                                <div className='button-section'>\r\n                                    <input type='submit' className='button' value='Submit' />\r\n                                    <input type='button' className='button' value='Cancel' onClick={() => {\r\n                                        this.setState({\r\n                                            isShowNewProfileModel: false,\r\n                                            newProfileName: '',\r\n                                        });\r\n                                    }} />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </Modal>\r\n                <Modal isOpen={this.state.isConfirmDeletingProfile}\r\n                    isBlocking={true} isDarkOverlay={true}>\r\n                    <div className='dialog-container dark-theme'>\r\n                        <div className='title-container'>Delete a Profile</div>\r\n                        <div className='content-container' role='presentation'>\r\n                            <form onSubmit={this.handleDeleteProfileSubmit}>\r\n                                <span>Are you sure you want to delete the profile: {!!this.props.selectedProfile && this.props.selectedProfile.name}</span>\r\n                                <div className='button-section'>\r\n                                    <input type='submit' className='button' value='Yes' />\r\n                                    <input type='button' className='button' value='No' onClick={() => {\r\n                                        this.setState({\r\n                                            isConfirmDeletingProfile: false,\r\n                                        });\r\n                                    }} />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </Modal>\r\n            </div>\r\n        } else {\r\n            profileList = <div>No profile.</div>\r\n        }\r\n\r\n        let profileDetails;\r\n        if (!!selectedProfile) {\r\n            profileDetails = <>\r\n                <h2>\r\n                    Profile: {selectedProfile.name}\r\n                </h2>\r\n                <div>{selectedProfile.description}</div>\r\n                <h3>Providers</h3>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Name</th>\r\n                            <th>Keywords</th>\r\n                            <th>EventLevel</th>\r\n                            <th>Filter</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {selectedProfile.providers.map((provider, index) => {\r\n                            return <tr key={provider.name}>\r\n                                <td>{provider.name}</td>\r\n                                <td>{provider.keywordsHex}</td>\r\n                                <td>{provider.eventLevel}</td>\r\n                                <td>{provider.filterData}</td>\r\n                                <td><input type='button' value='Delete' className='button' onClick={() => { this.handleRemoveProvider(provider.name); }} /></td>\r\n                            </tr>;\r\n                        })}\r\n                    </tbody>\r\n                </table>\r\n                <input type='button' value='Add' className='button' onClick={() => this.setState({ isShowAddProvider: true })} />\r\n                <Modal isOpen={this.state.isShowAddProvider} isBlocking={true} isDarkOverlay={true}>\r\n                    <div className='dialog-container dark-theme'>\r\n                        <div className='title-container'>Add a provider</div>\r\n                        <div className='content-container' role='presentation'>\r\n                            <form onSubmit={this.handleAddProvider}>\r\n                                <table className='ProviderTable'>\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            <td><label htmlFor={this._newProviderNameId}>Name:</label></td>\r\n                                            <td><input id={this._newProviderNameId}\r\n                                                type='input'\r\n                                                value={this.state.newProvider.name}\r\n                                                onChange={this.handleChangeForNewProvider('name')}\r\n                                                placeholder='New provider name'></input></td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>\r\n                                                <label htmlFor={this._newProviderKeywordId}>Keyword:</label>\r\n                                            </td>\r\n                                            <td>\r\n                                                <input id={this._newProviderKeywordId}\r\n                                                    type='input'\r\n                                                    value={this.state.newProvider.keywordsHex} onChange={this.handleChangeForNewProvider('keywordsHex')}\r\n                                                    placeholder='Keywords'></input>\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>\r\n                                                <label htmlFor={this._newProviderEventLevelId}>Event Level:</label>\r\n                                            </td>\r\n                                            <td>\r\n                                                <select value={this.state.newProvider.eventLevel} onChange={this.handleChangeForNewProvider('eventLevel')}>\r\n                                                    <option value={0}>Always Log</option>\r\n                                                    <option value={1}>Critical</option>\r\n                                                    <option value={2}>Error</option>\r\n                                                    <option value={3}>Warning</option>\r\n                                                    <option value={4}>Informational</option>\r\n                                                    <option value={5}>Verbose</option>\r\n                                                </select>\r\n                                            </td>\r\n                                        </tr>\r\n                                        <tr>\r\n                                            <td>\r\n                                                <label htmlFor={this._newProviderFilterId}>Filter:</label>\r\n                                            </td>\r\n                                            <td>\r\n                                                <input id={this._newProviderFilterId} type='input'\r\n                                                    value={this.state.newProvider.filterData}\r\n                                                    onChange={this.handleChangeForNewProvider('filterData')}\r\n                                                    placeholder='RegEx filter'></input>\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                                <div className='button-section'>\r\n                                    <input type='submit' className='button' value='OK' />\r\n                                    <input type='button' className='button' value='Cancel' onClick={() => {\r\n                                        this.setState({\r\n                                            isShowAddProvider: false,\r\n                                        });\r\n                                    }} />\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </Modal>\r\n                {!!this.props.selectedProfile &&\r\n                    <div className='profileRawText'>\r\n                        <div>RAW:</div>\r\n                        <textarea className='profileRawTextArea' readOnly value={JSON.stringify(this.props.selectedProfile)}></textarea>\r\n                    </div>}\r\n            </>\r\n        } else {\r\n            profileDetails = <div>Select or create a profile first.</div>\r\n        }\r\n\r\n        let exportProfiles;\r\n        if (effectiveProfileArray !== undefined) {\r\n            exportProfiles = <div>\r\n                <input type='button' className='button' value='Export All'\r\n                    onClick={() => {\r\n                        FileSaver.saveAs('http://localhost:9400/profiles', 'profiles.json');\r\n                    }} />\r\n            </div>\r\n        }\r\n\r\n        return <div className='ProfileManager'>\r\n            <div className='ProfileList'>\r\n                <div className='HeaderContainer'>\r\n                    <h2>Pick a Profile</h2>\r\n                    &nbsp;(<div className='AddRemoveButton' onClick={() => this.setState({ isShowNewProfileModel: true })}>+</div>\r\n                    /\r\n                    <div className='AddRemoveButton' onClick={() => this.setState({ isConfirmDeletingProfile: true })}>-</div>)\r\n                </div>\r\n                {profileList}\r\n                {exportProfiles}\r\n            </div>\r\n            <div className='ProfileDetails'>\r\n                {profileDetails}\r\n            </div>\r\n        </div>\r\n    }\r\n    private handleRemoveProvider(name: string) {\r\n        this.props.removeProvider(name);\r\n    }\r\n\r\n    private handleNewProfileName: ((event: ChangeEvent<HTMLInputElement>) => void) | undefined = (event) => {\r\n        this.setState({\r\n            newProfileName: event.target.value,\r\n        });\r\n    }\r\n\r\n    private handleNewProfileDescription: ((event: ChangeEvent<HTMLInputElement>) => void) | undefined = (event) => {\r\n        this.setState({\r\n            newProfileDescription: event.target.value,\r\n        });\r\n    }\r\n\r\n    private handleNewProfileSubmit: ((event: FormEvent<HTMLFormElement>) => void) | undefined = async (event) => {\r\n        event.preventDefault();\r\n        const result = await this.props.addProfileAsync({\r\n            name: this.state.newProfileName,\r\n            description: this.state.newProfileDescription,\r\n            providers: []\r\n        });\r\n\r\n        if (result !== null) {\r\n            this.setState({\r\n                isShowNewProfileModel: false,\r\n                newProfileDescription: '',\r\n                newProfileName: '',\r\n            });\r\n            this.props.refreshProfile();\r\n        }\r\n    }\r\n\r\n    private pickFirstProfile() {\r\n        if (!!this.props.profileArray && this.props.profileArray.length > 0 && !this.props.selectedProfile) {\r\n            this.props.setManageProfile(this.props.profileArray[0]);\r\n        }\r\n    }\r\n\r\n    private handleDeleteProfileSubmit: ((event: FormEvent<HTMLFormElement>) => void) | undefined = async (event) => {\r\n        event.preventDefault();\r\n        if (this.props.selectedProfile !== undefined) {\r\n            const result = await this.props.deleteProfileAsync(this.props.selectedProfile.name);\r\n            if (result) {\r\n                this.setState({\r\n                    isConfirmDeletingProfile: false,\r\n                });\r\n                this.props.setManageProfile(undefined);\r\n                this.props.refreshProfile();\r\n            } else {\r\n                alert('Fail to delete profiler: ' + this.props.selectedProfile.name);\r\n            }\r\n        } else {\r\n            alert('No selected profile.');\r\n        }\r\n    }\r\n\r\n    private handleAddProvider: ((event: FormEvent<HTMLFormElement>) => void) | undefined = async (event) => {\r\n        event.preventDefault();\r\n        const { newProvider } = this.state;\r\n        if (!!newProvider.name && !!newProvider.keywordsHex) {\r\n            this.props.appendProvider(newProvider);\r\n            this.setState({\r\n                newProvider: {\r\n                    name: '',\r\n                    keywordsHex: '0x0',\r\n                    eventLevel: 5,\r\n                    filterData: '',\r\n                },\r\n                isShowAddProvider: false,\r\n            });\r\n        } else {\r\n            alert('Provider Name & Keywords are required.');\r\n        }\r\n    }\r\n\r\n    handleChangeForNewProvider = (propertyName: string) => (event: ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n        const { newProvider } = this.state;\r\n        const newState = {\r\n            ...newProvider,\r\n            [propertyName]: event.target.value\r\n        };\r\n        this.setState({ newProvider: newState });\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport './Components/Processes'\r\nimport Process from './Models/Process';\r\nimport { TraceSession } from './Models/TraceSession';\r\n\r\nimport Processes from './Components/Processes';\r\nimport TraceSessions from './Components/TraceSessions';\r\nimport TraceFile from './Models/TraceFile';\r\nimport TraceRepo from './Components/TraceRepo';\r\nimport ConnectingToBackend from './Components/ConnectingToBackend';\r\nimport { AppHeader } from './Components/AppHeader';\r\nimport { ConnectionStatus } from './Components/ConnectionStatus';\r\nimport { Profile } from './Models/Profile';\r\nimport ProfilePicker from './Components/ProfilePicker';\r\nimport { MonitorReport } from './Models/MonitorReport';\r\nimport MonitorPage from './Components/MonitorPage';\r\nimport { ProfileManager } from './Components/ProfileManager';\r\nimport { Provider } from './Models/Provider';\r\n\r\ninterface AppState {\r\n  processArray: Process[] | undefined;\r\n  traceSessionArray: TraceSession[] | undefined;\r\n  traceFileArray: TraceFile[] | undefined;\r\n  isReady: boolean;\r\n  isBackendReady: boolean;\r\n  backendUrlArray: string[];\r\n  baseUrl: string;\r\n  profileArray: Profile[] | undefined;\r\n  selectedProfile: string | undefined;\r\n  isDumping: boolean;\r\n  selectedSession: undefined | TraceSession;\r\n  isShowMonitor: boolean;\r\n  isManageProfile: boolean;\r\n  selectedProfileForManage: Profile | undefined;\r\n}\r\n\r\nexport default class App extends Component<any, AppState>{\r\n  readonly BackendListKey: string = 'backendList';\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    // Initial state\r\n    this.state = {\r\n      processArray: undefined,\r\n      traceSessionArray: undefined,\r\n      traceFileArray: undefined,\r\n      isReady: false,\r\n      isBackendReady: false,\r\n      backendUrlArray: this.getList(),\r\n      baseUrl: '',\r\n      profileArray: undefined,\r\n      selectedProfile: undefined,\r\n      selectedProfileForManage: undefined,\r\n      isDumping: false,\r\n      selectedSession: undefined,\r\n      isShowMonitor: false,\r\n      isManageProfile: false,\r\n    };\r\n\r\n    this.removeProvider = this.removeProvider.bind(this);\r\n    this.appendProvider = this.appendProvider.bind(this);\r\n    this.takeDumpAsync = this.takeDumpAsync.bind(this);\r\n\r\n    this.goHome = this.goHome.bind(this);\r\n  }\r\n  render() {\r\n    let content;\r\n\r\n    if (!this.state.isBackendReady) {\r\n      content = <ConnectingToBackend\r\n        backendUrlArray={this.state.backendUrlArray}\r\n        addBackend={this.addBackend}\r\n        removeBackend={this.removeBackend}\r\n        connectToBackendAsync={this.connectToBackendAsync}\r\n      />;\r\n    } else {\r\n      const { isShowMonitor, selectedSession, isManageProfile, profileArray } = this.state;\r\n      if (!this.state.isReady) {\r\n        return null;\r\n      }\r\n\r\n      if (isShowMonitor && selectedSession !== undefined) {\r\n        content = <MonitorPage\r\n          selectedEndpoint={this.state.baseUrl}\r\n          traceSessionArray={this.state.traceSessionArray}\r\n          isDumping={this.state.isDumping}\r\n          processId={selectedSession.processId}\r\n          sessionId={selectedSession.sessionId}\r\n          exitMonitor={() => { this.setShowMonitoring(false); }}\r\n          takeDumpAsync={this.takeDumpAsync}\r\n          startProfilingAsync={this.startProfilingAsync}\r\n          stopProfilingAsync={this.stopProfilingAsync}\r\n        />\r\n      }\r\n      else if (isManageProfile) {\r\n        content = <ProfileManager\r\n          profileArray={profileArray}\r\n          selectedProfile={this.state.selectedProfileForManage}\r\n          setManageProfile={this.setManageProfile}\r\n          addProfileAsync={this.addNewProfileAsync}\r\n          refreshProfile={this.loadProfilesAsync}\r\n          deleteProfileAsync={this.deleteProfileAsync}\r\n          appendProvider={this.appendProvider}\r\n          removeProvider={this.removeProvider}\r\n        ></ProfileManager>\r\n      } else {\r\n        content = <>\r\n          <div className='section'>\r\n            <ConnectionStatus baseUrl={this.state.baseUrl}\r\n              disconnectBackend={this.disconnectBackend}\r\n            />\r\n            <ProfilePicker\r\n              manageProfile={() => this.manageProfile(true)}\r\n              profileArray={this.state.profileArray}\r\n              onSelected={this.selectProfile}\r\n              selectedProfile={this.state.selectedProfile}\r\n              onRefresh={this.loadProfilesAsync}\r\n            />\r\n            <Processes\r\n              refreshProcessAsync={this.loadProcessesAsync}\r\n              startProfilingAsync={this.startProfilingAsync}\r\n              startMonitoringAsync={this.startMonitoringAsync}\r\n              takeDumpAsync={this.takeDumpAsync}\r\n              processArray={this.state.processArray}\r\n              isDumping={this.state.isDumping}\r\n            />\r\n            <TraceSessions\r\n              traceSessions={this.state.traceSessionArray}\r\n              stopProfilingAsync={this.stopProfilingAsync}\r\n              stopMonitoringAsync={this.stopMonitoringAsync}\r\n              loadTraceSessionsAsync={this.loadTraceSessionsAsync}\r\n              setAsSelected={this.setSelectedSession} />\r\n            <TraceRepo\r\n              baseUrl={this.state.baseUrl}\r\n              loadTraceFilesAsync={this.loadTraceFilesAsync}\r\n              convertToSpeedscopeAsync={this.convertToSpeedscopeAsync}\r\n              fileArray={this.state.traceFileArray}\r\n            />\r\n          </div>\r\n        </>;\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className='dark-theme'>\r\n        <AppHeader isHome={\r\n          (!this.state.isBackendReady) ||\r\n          (this.state.isBackendReady &&\r\n            !this.state.isShowMonitor &&\r\n            !this.state.isManageProfile)}\r\n          goHome={this.goHome} />\r\n        <div className='app-container'>\r\n          {content}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private initializeAsync: () => Promise<any> = async () => {\r\n    await Promise.all([\r\n      this.loadProcessesAsync(),\r\n      this.loadTraceSessionsAsync(),\r\n      this.loadTraceFilesAsync(),\r\n      this.loadProfilesAsync(),\r\n    ]);\r\n\r\n    this.selectProfile('runtime-basic');\r\n\r\n    this.setState({\r\n      isReady: true,\r\n    });\r\n  }\r\n\r\n  // Processes\r\n  private loadProcessesAsync: () => Promise<void> = async () => {\r\n    try {\r\n      const processes = await this.getProcessesAsync();\r\n      this.setState({\r\n        processArray: processes,\r\n      });\r\n    } catch (ex) {\r\n      this.setState({\r\n        processArray: undefined,\r\n      });\r\n    }\r\n  }\r\n  private getProcessesAsync: () => Promise<Process[]> = async () => {\r\n    const response = await fetch(`${this.state.baseUrl}/processes`);\r\n    if (!!response && response.ok) {\r\n      const results: Process[] = await response.json();\r\n      return results;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  // Traces\r\n  private startProfilingAsync: (processId: number) => Promise<boolean> = async (processId: number) => {\r\n    const response = await fetch(`${this.state.baseUrl}/traces`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        processId: processId,\r\n        profile: this.state.selectedProfile,\r\n      }),\r\n    });\r\n\r\n    const result = !!response && response.ok;\r\n    if (result) {\r\n      await this.loadTraceSessionsAsync();\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private stopProfilingAsync: (processId: number, sessionId: number) => Promise<boolean> = async (processId: number, sessionId: number) => {\r\n    const response = await fetch(`${this.state.baseUrl}/traces/${processId}?sessionId=${sessionId}`, {\r\n      method: 'DELETE',\r\n    });\r\n\r\n    const result = !!response && response.ok;\r\n    if (result) {\r\n      await Promise.all([this.loadTraceSessionsAsync(), this.loadTraceFilesAsync()]);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // Monitoring\r\n  private startMonitoringAsync: (processId: number) => Promise<boolean> = async (processId) => {\r\n    const response = await fetch(`${this.state.baseUrl}/monitors`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        processId\r\n      }),\r\n    });\r\n\r\n    const result = !!response && response.ok;\r\n    if (result) {\r\n      await this.loadTraceSessionsAsync();\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private stopMonitoringAsync: (processId: number, sessionId: number) => Promise<boolean> = async (processId, sessionId) => {\r\n    const response = await fetch(`${this.state.baseUrl}/monitors`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        processId,\r\n        id: sessionId,\r\n      }),\r\n    });\r\n\r\n    const result = !!response && response.ok;\r\n    if (result) {\r\n      await this.loadTraceSessionsAsync();\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // Sessions\r\n  private loadTraceSessionsAsync: () => Promise<void> = async () => {\r\n    try {\r\n      const traceSessions = await this.getTraceSessionsAsync();\r\n      this.setState({\r\n        traceSessionArray: traceSessions,\r\n      });\r\n    } catch{\r\n      this.setState({\r\n        traceSessionArray: undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  private getTraceSessionsAsync: () => Promise<TraceSession[]> = async () => {\r\n    const response = await fetch(`${this.state.baseUrl}/sessions`);\r\n    if (!!response && response.ok) {\r\n      const result: TraceSession[] = await response.json();\r\n      return result;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  private setSelectedSession: (traceSession: TraceSession | undefined) => void = (selectedSession) => {\r\n    const newState: Partial<AppState> = {\r\n      selectedSession\r\n    };\r\n    if (selectedSession === undefined) {\r\n      newState.isShowMonitor = false;\r\n    } else if (!this.state.isShowMonitor) {\r\n      newState.isShowMonitor = true;\r\n    }\r\n    this.setState(newState as AppState);\r\n  }\r\n\r\n  private getReportAsync: () => Promise<MonitorReport | undefined> = async () => {\r\n    const { selectedSession } = this.state;\r\n    if (selectedSession === undefined) {\r\n      return undefined;\r\n    }\r\n    const response = await fetch(`${this.state.baseUrl}/Monitors/${selectedSession.processId}/${selectedSession.sessionId}`);\r\n    if (!!response && response.ok) {\r\n      const result: MonitorReport = await response.json();\r\n      return result;\r\n    } else {\r\n      return undefined;\r\n    }\r\n  }\r\n\r\n  private setShowMonitoring: (value: boolean) => void = (value) => {\r\n    this.setState({\r\n      isShowMonitor: value,\r\n    });\r\n  }\r\n\r\n  // Repository\r\n  private loadTraceFilesAsync: () => Promise<void> = async () => {\r\n    try {\r\n      const files = await this.getTraceFilesAsync();\r\n      this.setState({\r\n        traceFileArray: files,\r\n      });\r\n    } catch{\r\n      this.setState({\r\n        traceFileArray: undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  private getTraceFilesAsync: () => Promise<TraceFile[]> = async () => {\r\n    const response = await fetch(`${this.state.baseUrl}/traceFiles`);\r\n    if (!!response && response.ok) {\r\n      const result: TraceFile[] = await response.json();\r\n      return result;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  private convertToSpeedscopeAsync: (fileName: string) => Promise<boolean> = async (fileName) => {\r\n    const response = await fetch(`${this.state.baseUrl}/traceFiles`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        fileName,\r\n      }),\r\n    });\r\n    if (!!response && response.ok) {\r\n      await this.loadTraceFilesAsync();\r\n      return true;\r\n    } else {\r\n      const error = await response.json();\r\n\r\n      alert('Converting failed.' + !!error.error ? ' Details: ' + error.error : '');\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Backend\r\n  private addBackend: (url: string) => void = (url: string) => {\r\n    url = url.toLowerCase();\r\n    const list = this.getList();\r\n    if (!list.includes(url)) {\r\n      list.push(url);\r\n    }\r\n    localStorage.setItem(this.BackendListKey, JSON.stringify(list));\r\n    this.setState({\r\n      backendUrlArray: list\r\n    });\r\n  }\r\n\r\n  private removeBackend: (url: string) => void = (url: string): void => {\r\n    url = url.toLowerCase();\r\n    let list = this.getList();\r\n    list = list.filter(item => item !== url);\r\n    localStorage.setItem(this.BackendListKey, JSON.stringify(list));\r\n    this.setState({\r\n      backendUrlArray: list\r\n    });\r\n  }\r\n\r\n  private getList(): string[] {\r\n    const urlListSerialized: string | null = localStorage.getItem(this.BackendListKey);\r\n    let list: string[];\r\n    if (urlListSerialized === null || urlListSerialized === '' || urlListSerialized === '[]') {\r\n      list = ['http://localhost:9400'];\r\n    } else {\r\n      list = JSON.parse(urlListSerialized);\r\n    }\r\n    return list;\r\n  }\r\n\r\n  private disconnectBackend: () => void = () => {\r\n    this.setState({\r\n      baseUrl: '',\r\n      isReady: false,\r\n      isBackendReady: false,\r\n    });\r\n  }\r\n\r\n  private connectToBackendAsync: (url: string) => Promise<boolean> = async (url: string) => {\r\n    try {\r\n      url = url.trim();\r\n      if (!url.startsWith('http') && !url.startsWith('https')) {\r\n        return false;\r\n      }\r\n      if (url.endsWith('/')) {\r\n        url = url.substring(0, url.length - 1);\r\n      }\r\n      const response = await fetch(url + '/processes');\r\n      if (!!response && response.ok) {\r\n        this.setState({\r\n          isBackendReady: true,\r\n          baseUrl: url,\r\n        });\r\n        await this.initializeAsync();\r\n        return true;\r\n      }\r\n      return false;\r\n    } catch (err) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Profiles\r\n  private manageProfile: (value: boolean) => void = (value) => {\r\n    this.setState({\r\n      isManageProfile: value,\r\n    });\r\n  }\r\n\r\n  private setManageProfile: (value: Profile | undefined) => void = (value) => {\r\n    this.setState({\r\n      selectedProfileForManage: value,\r\n    });\r\n  }\r\n\r\n  private loadProfilesAsync: () => void = async () => {\r\n    const result = await this.getProfilesAsync();\r\n    if (result.length > 0) {\r\n      this.setState({\r\n        profileArray: result,\r\n      });\r\n    } else {\r\n      this.setState({\r\n        profileArray: undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  private getProfilesAsync: () => Promise<Profile[]> = async () => {\r\n    const response = await fetch(`${this.state.baseUrl}/profiles`);\r\n    if (!!response && response.ok) {\r\n      const result: Profile[] = await response.json();\r\n      return result;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  private selectProfile: (newValue: string) => void = (newValue: string) => {\r\n    this.setState({\r\n      selectedProfile: newValue\r\n    });\r\n  }\r\n\r\n  private addNewProfileAsync: (newProfile: Profile) => Promise<Profile> = async (newProfile) => {\r\n    const response = await fetch(`${this.state.baseUrl}/profiles`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(newProfile),\r\n    });\r\n    if (!!response && response.ok) {\r\n      return response.json();\r\n    } else {\r\n      const error = await response.json();\r\n      alert(error);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /** Append a provider to selected profile */\r\n  private appendProvider(newProvider: Provider) {\r\n    const selectedProvider = Object.assign({}, this.state.selectedProfileForManage);\r\n    selectedProvider.providers.push(newProvider);\r\n    this.setState({\r\n      selectedProfileForManage: selectedProvider,\r\n    });\r\n\r\n    this.updateProfileAsync();\r\n  }\r\n\r\n  // Remove a provider from selected profile\r\n  private removeProvider(name: string): void {\r\n    if (!name) return;\r\n    const selectedProvider = Object.assign({}, this.state.selectedProfileForManage);\r\n    selectedProvider.providers = selectedProvider.providers.filter(p => p.name !== name);\r\n    this.setState({\r\n      selectedProfileForManage: selectedProvider,\r\n    });\r\n\r\n    this.updateProfileAsync();\r\n  }\r\n\r\n  private updateProfileAsync: () => Promise<any> = async () => {\r\n    if (!!this.state.selectedProfileForManage) {\r\n      const newProfile = this.state.selectedProfileForManage;\r\n\r\n      const response = await fetch(`${this.state.baseUrl}/profiles/${newProfile.name}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(newProfile),\r\n      });\r\n      if (!!response && response.ok) {\r\n        return response.json();\r\n      } else {\r\n        const error = await response.json();\r\n        if (error.title) {\r\n          alert(error.title);\r\n        } else {\r\n          alert(error);\r\n        }\r\n      }\r\n    } else {\r\n      alert('No profile for updating...');\r\n    }\r\n  }\r\n\r\n  private deleteProfileAsync: (name: string) => Promise<boolean> = async (name) => {\r\n    const response = await fetch(`${this.state.baseUrl}/profiles/${encodeURI(name)}`, {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n    let result: boolean = false;\r\n    if (!!response && response.ok) {\r\n      result = true;\r\n    } else {\r\n      const error = await response.json();\r\n      alert(error);\r\n    }\r\n    return result;\r\n  }\r\n\r\n  // Dumps\r\n  private takeDumpAsync: (processId: number, isMini: boolean) => Promise<any> = async (processId, isMini) => {\r\n    this.setState({\r\n      isDumping: true,\r\n    });\r\n    const DUMP_TYPE_HEAP = 0;\r\n    const DUMP_TYPE_MINI = 1;\r\n    const dumpType = isMini ? DUMP_TYPE_MINI : DUMP_TYPE_HEAP;\r\n    const response = await fetch(`${this.state.baseUrl}/dumps`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        processId,\r\n        dumpType,\r\n      }),\r\n    });\r\n    if (!!response && response.ok) {\r\n      await this.loadTraceFilesAsync();\r\n      alert('Dump crated for process ' + processId);\r\n      this.setState({ isDumping: false })\r\n      return true;\r\n    } else {\r\n      alert('Failed to create the dump for this process: ' + processId);\r\n      this.setState({ isDumping: false })\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // Others\r\n  private goHome: () => void = () => {\r\n    this.setState({\r\n      isShowMonitor: false,\r\n      isManageProfile: false,\r\n    });\r\n  }\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}