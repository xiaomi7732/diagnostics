(window["webpackJsonpdotnet-trace-ui"]=window["webpackJsonpdotnet-trace-ui"]||[]).push([[0],{10:function(e,t,n){e.exports=n(18)},15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(9),c=n.n(s),o=(n(15),n(1)),i=n.n(o),l=n(2),u=n(3),p=n(4),d=n(6),h=n(5),f=n(7),y=(n(17),function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(a)))).handleRefresh=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),n.props.refreshProcessAsync();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.processArray||0===this.props.processArray.length?e=a.a.createElement("div",null,"There is no .NET Core processes."):(n=this.props.processArray.length,e=this.props.processArray.map(function(e,n){return a.a.createElement("div",{key:n},a.a.createElement("span",null,e.id),"-",a.a.createElement("span",null,e.name),"-",a.a.createElement("span",null,e.mainModule),a.a.createElement("input",{type:"button",value:"Start Profiling",onClick:function(){console.debug("Start Profiling for session: ".concat(e.id)),t.props.startProfilingAsync(e.id)}}))})),a.a.createElement("div",null,a.a.createElement("h2",null,"Process (",n,")"),e,a.a.createElement("input",{type:"button",onClick:this.handleRefresh,value:"Refresh"}))}}]),t}(r.Component)),v=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.traceSessions||0===this.props.traceSessions.length?e=a.a.createElement("div",null,"There's no trace sessions."):(n=this.props.traceSessions.length,e=a.a.createElement("div",null,this.props.traceSessions.map(function(e,n){return a.a.createElement("div",{key:n},a.a.createElement("span",null,"ProcessId:"),a.a.createElement("span",null,e.processId),"\xa0",a.a.createElement("span",null,"SessionId:"),a.a.createElement("span",null,e.sessionId),"\xa0",a.a.createElement("input",{type:"button",value:"Stop Profiling",onClick:function(){console.debug("Stopping profiler: ".concat(e.processId,":").concat(e.sessionId)),t.props.stopProfilingAsync(e.processId,e.sessionId)}}))}))),a.a.createElement("div",null,a.a.createElement("h2",null,"Trace Sessions (",n,")"),e,a.a.createElement("input",{type:"button",value:"Refresh",onClick:this.props.loadTraceSessionsAsync}))}}]),t}(r.PureComponent),m=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,n=0;return void 0===this.props.fileArray||0===this.props.fileArray.length?e=a.a.createElement("div",null,"There's no trace file."):(n=this.props.fileArray.length,e=a.a.createElement("div",null,this.props.fileArray.sort(function(e,t){return e.fileName>t.fileName?-1:1}).map(function(e,n){return a.a.createElement("div",{key:n},a.a.createElement("a",{href:"".concat(t.props.baseUrl,"/TraceFiles/").concat(e.fileName)},e.fileName),a.a.createElement("input",{type:"button",value:"Upload to SP Backend",onClick:function(){return alert("Not implemented: ".concat(e.fileName))}}))}))),a.a.createElement("div",null,a.a.createElement("h2",null,"Trace Files (",n,")"),e,a.a.createElement("input",{type:"button",value:"Refresh",onClick:Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.props.loadTraceFilesAsync();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}))}}]),t}(r.PureComponent),b=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleAddBackend=function(e){e.preventDefault();var t=e.target.newBackend.value;t&&(n.props.addBackend(t),n.setState({newUrl:""}))},n.handleNewUrlChanged=function(e){n.setState({newUrl:e.target.value})},n.state={errorMessage:void 0,isConnecting:!1,newUrl:""},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this;return e=void 0===this.props.backendUrlArray||0===this.props.backendUrlArray.length?a.a.createElement("div",null,"Please add backend."):this.props.backendUrlArray.map(function(e,n){return a.a.createElement("div",{key:n},a.a.createElement("span",null,e),a.a.createElement("input",{type:"button",value:"Connect",onClick:Object(l.a)(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.setState({errorMessage:"",isConnecting:!0}),n.next=3,t.props.connectToBackendAsync(e);case 3:n.sent||t.setState({errorMessage:"Failed to connecting to backend: ".concat(e,"."),isConnecting:!1});case 5:case"end":return n.stop()}},n)}))}),a.a.createElement("input",{type:"button",value:"Remove",onClick:Object(l.a)(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.props.removeBackend(e);case 1:case"end":return n.stop()}},n)}))}))}),a.a.createElement("div",null,a.a.createElement("h1",null,".NET Core Profiling Console"),a.a.createElement("div",null,a.a.createElement("span",null,"Pick a backend to connect to:"),e,!!this.state.isConnecting&&a.a.createElement("div",null,"Connecting . . ."),!!this.state.errorMessage&&a.a.createElement("div",null,this.state.errorMessage)),a.a.createElement("div",null,a.a.createElement("form",{onSubmit:this.handleAddBackend},a.a.createElement("label",{htmlFor:"newBackend"},"Type in a new endpoint:"),a.a.createElement("input",{id:"newBackend",type:"textbox",placeholder:"http://localhost:9400",value:this.state.newUrl,onChange:this.handleNewUrlChanged}))))}}]),t}(r.Component),k=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).BackendListKey="backendList",n.initializeAsync=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.loadProcessesAsync(),n.loadTraceSessionsAsync(),n.loadTraceFilesAsync()]);case 2:n.setState({isReady:!0});case 3:case"end":return e.stop()}},e)})),n.loadProcessesAsync=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getProcessesAsync();case 3:t=e.sent,n.setState({processArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({processArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getProcessesAsync=Object(l.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/processes"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.startProfilingAsync=function(){var e=Object(l.a)(i.a.mark(function e(t){var r,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({processId:t})});case 2:if(r=e.sent,!(a=!!r&&r.ok)){e.next=7;break}return e.next=7,n.loadTraceSessionsAsync();case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.stopProfilingAsync=function(){var e=Object(l.a)(i.a.mark(function e(t,r){var a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traces/").concat(t,"?sessionId=").concat(r),{method:"DELETE"});case 2:if(a=e.sent,!(s=!!a&&a.ok)){e.next=7;break}return e.next=7,Promise.all([n.loadTraceSessionsAsync(),n.loadTraceFilesAsync()]);case 7:return e.abrupt("return",s);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),n.loadTraceSessionsAsync=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceSessionsAsync();case 3:t=e.sent,n.setState({traceSessionArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceSessionArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceSessionsAsync=Object(l.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/sessions"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.loadTraceFilesAsync=Object(l.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getTraceFilesAsync();case 3:t=e.sent,n.setState({traceFileArray:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n.setState({traceFileArray:void 0});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),n.getTraceFilesAsync=Object(l.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n.state.baseUrl,"/traceFiles"));case 2:if(!(t=e.sent)||!t.ok){e.next=8;break}return e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)})),n.addBackend=function(e){e=e.toLowerCase();var t=n.getList();t.includes(e)||t.push(e),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.removeBackend=function(e){e=e.toLowerCase();var t=n.getList();t=t.filter(function(t){return t!==e}),localStorage.setItem(n.BackendListKey,JSON.stringify(t)),n.setState({backendUrlArray:t})},n.disconnectBackend=function(){n.setState({baseUrl:"",isReady:!1,isBackendReady:!1})},n.connectToBackendAsync=function(){var e=Object(l.a)(i.a.mark(function e(t){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(t=t.trim()).startsWith("http")||t.startsWith("https")){e.next=4;break}return e.abrupt("return",!1);case 4:return t.endsWith("/")&&(t=t.substring(0,t.length-1)),e.next=7,fetch(t+"/processes");case 7:if(!(r=e.sent)||!r.ok){e.next=13;break}return n.setState({isBackendReady:!0,baseUrl:t}),e.next=12,n.initializeAsync();case 12:return e.abrupt("return",!0);case 13:return e.abrupt("return",!1);case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return",!1);case 19:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),n.state={processArray:void 0,traceSessionArray:void 0,traceFileArray:void 0,isReady:!1,isBackendReady:!1,backendUrlArray:n.getList(),baseUrl:""},n}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.state.isBackendReady?this.state.isReady?a.a.createElement("div",null,a.a.createElement("h1",null,".NET Core Profiling Console"),a.a.createElement("div",null,a.a.createElement("span",null,"You are connecting to: ",this.state.baseUrl),a.a.createElement("input",{type:"button",onClick:this.disconnectBackend,value:"Disconnect"})),a.a.createElement(y,{refreshProcessAsync:this.loadProcessesAsync,startProfilingAsync:this.startProfilingAsync,processArray:this.state.processArray}),a.a.createElement(v,{traceSessions:this.state.traceSessionArray,stopProfilingAsync:this.stopProfilingAsync,loadTraceSessionsAsync:this.loadTraceSessionsAsync}),a.a.createElement(m,{baseUrl:this.state.baseUrl,loadTraceFilesAsync:this.loadTraceFilesAsync,fileArray:this.state.traceFileArray})):null:a.a.createElement(b,{backendUrlArray:this.state.backendUrlArray,addBackend:this.addBackend,removeBackend:this.removeBackend,connectToBackendAsync:this.connectToBackendAsync})}},{key:"getList",value:function(){var e=localStorage.getItem(this.BackendListKey);return null===e||""===e?[]:JSON.parse(e)}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.b37ff524.chunk.js.map